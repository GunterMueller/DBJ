<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Jenas Datenbanksystem &apos;System J&apos;: print_btree.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>print_btree.cpp</h1><a href="print__btree_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*************************************************************************\</span>
00002 <span class="comment"> *                                                                       *</span>
00003 <span class="comment"> * (C) 2004                                                              *</span>
00004 <span class="comment"> * Lehrstuhl fuer Datenbanken und Informationssysteme                    *</span>
00005 <span class="comment"> * Friedrich-Schiller-Universitaet Jena                                  *</span>
00006 <span class="comment"> * Ernst-Abbe-Platz 1-2                                                  *</span>
00007 <span class="comment"> * 07745 Jena                                                            *</span>
00008 <span class="comment"> *                                                                       *</span>
00009 <span class="comment">\*************************************************************************/</span>
00010 
00011 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00012 <span class="preprocessor">#include &lt;fstream&gt;</span>
00013 
00014 <span class="preprocessor">#include "<a class="code" href="_dbj_8hpp.html">Dbj.hpp</a>"</span>
00015 <span class="preprocessor">#include "<a class="code" href="_dbj_b_tree_8hpp.html">DbjBTree.hpp</a>"</span>
00016 <span class="preprocessor">#include "<a class="code" href="_dbj_index_manager_8hpp.html">DbjIndexManager.hpp</a>"</span>
00017 
<a name="l00018"></a><a class="code" href="print__btree_8cpp.html#a0">00018</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="_dbj_components_8hpp.html#a12">DbjComponent</a> <a class="code" href="print__btree_8cpp.html#a0">componentId</a> = <a class="code" href="_dbj_components_8hpp.html#a12a7">IndexManager</a>;
00019 
00020 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00021 
<a name="l00022"></a><a class="code" href="class_print_b_tree.html">00022</a> <span class="keyword">class </span><a class="code" href="class_print_b_tree.html">PrintBTree</a> {
00023   <span class="keyword">public</span>:
00024 
<a name="l00025"></a><a class="code" href="class_print_b_tree.html#a0">00025</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_print_b_tree.html#a0">printBTree</a>(<span class="keywordtype">char</span>* <span class="keyword">const</span> file, DbjDataType <span class="keyword">const</span> dataType)
00026           {
00027               <a class="code" href="struct_dbj_b_tree_1_1_inventory.html">DbjBTree::Inventory</a>* inventory = NULL;
00028               <a class="code" href="group__int__datatypes.html#ga15">Uint32</a> count = 0;
00029               <a class="code" href="class_dbj_b_tree_1_1_node.html">DbjBTree::Leaf</a>* leaf = NULL;
00030               <a class="code" href="class_dbj_b_tree_1_1_node.html">DbjBTree::Inner</a>* innerNode = NULL;
00031               <a class="code" href="struct_dbj_b_tree_1_1_header.html">DbjBTree::Header</a>* header = NULL;
00032               <a class="code" href="class_dbj_b_tree_1_1_node_sint32.html">DbjBTree::InnerSint32</a> intInnerNode;
00033               <a class="code" href="class_dbj_b_tree_1_1_node_varchar.html">DbjBTree::InnerVarchar</a> vcInnerNode;
00034               <a class="code" href="class_dbj_b_tree_1_1_node_sint32.html">DbjBTree::LeafSint32</a> intLeaf;
00035               <a class="code" href="class_dbj_b_tree_1_1_node_varchar.html">DbjBTree::LeafVarchar</a> vcLeaf;
00036               <a class="code" href="group__int__datatypes.html#ga15">Uint32</a> countEntries = 0;
00037               <a class="code" href="class_dbj_index_key.html">DbjIndexKey</a> key;
00038               <a class="code" href="group__id__datatypes.html#ga0">PageId</a> reference = 0;
00039               <a class="code" href="struct_tuple_id.html">TupleId</a> tupel;
00040               <a class="code" href="class_dbj_index_key.html">DbjIndexKey</a> foundKey;
00041               <a class="code" href="struct_tuple_id.html">TupleId</a> foundTuple;
00042               <span class="keywordtype">char</span> buffer[DBJ_PAGE_SIZE];
00043               
00044               fstream f; <span class="comment">// (file, fstream::in | fstream::out | fstream::binary);</span>
00045                   
00046               f.open(file, fstream::in | fstream::out | fstream::binary);
00047               
00048               {
00049                   fstream::pos_type length = 0;
00050                   f.seekg(0, fstream::end);
00051                   length = f.tellg();
00052                   <span class="keywordflow">if</span> (<a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(length) &lt; (0+1) * DBJ_PAGE_SIZE) {
00053                       printf(<span class="stringliteral">"\nPage not found!\n"</span>);
00054                       <span class="keywordflow">goto</span> cleanup;
00055                   }
00056               }
00057               
00058               <span class="comment">// Lies Seite</span>
00059               f.seekg(0 * DBJ_PAGE_SIZE, fstream::beg);
00060               f.read(reinterpret_cast&lt;char *&gt;(buffer), DBJ_PAGE_SIZE);
00061               <span class="keywordflow">if</span> (f.bad()) {
00062                   printf(<span class="stringliteral">"\nLesefehler!\n"</span>);
00063                   <span class="keywordflow">goto</span> cleanup;
00064               }
00065               
00066               inventory = reinterpret_cast&lt;DbjBTree::Inventory *&gt;(buffer);
00067               count = inventory-&gt;<a class="code" href="struct_dbj_b_tree_1_1_inventory.html#o1">pages</a>;
00068               <span class="comment">// dataType = inventory-&gt;dataType;</span>
00069               printf(<span class="stringliteral">"\nSeite 0: \n"</span>);
00070               printf(<span class="stringliteral">"Count: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>, count);
00071               printf(<span class="stringliteral">"DataType: %s\n"</span>, dataType == <a class="code" href="group__datatypes.html#gga0a33">INTEGER</a> ? <span class="stringliteral">"INTEGER"</span> :
00072                       (dataType == <a class="code" href="group__datatypes.html#gga0a32">VARCHAR</a> ? <span class="stringliteral">"VARCHAR"</span> : <span class="stringliteral">"UnknownDataType"</span>));
00073               printf(<span class="stringliteral">"DeletedPages: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00074                       <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(inventory-&gt;<a class="code" href="struct_dbj_b_tree_1_1_inventory.html#o2">deletedPages</a>));
00075               printf(<span class="stringliteral">"Next Inventory Page: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00076                       <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(inventory-&gt;<a class="code" href="struct_dbj_b_tree_1_1_inventory.html#o3">nextFsiPage</a>));
00077               <span class="keywordflow">switch</span> (dataType) {
00078                 <span class="keywordflow">case</span> <a class="code" href="group__datatypes.html#gga0a33">INTEGER</a>:
00079                     leaf = &amp;intLeaf;
00080                     innerNode = &amp;intInnerNode;
00081                     <span class="keywordflow">break</span>;
00082                 <span class="keywordflow">case</span> <a class="code" href="group__datatypes.html#gga0a32">VARCHAR</a>:
00083                     leaf = &amp;vcLeaf;
00084                     innerNode = &amp;vcInnerNode;
00085                     <span class="keywordflow">break</span>;
00086                 <span class="keywordflow">default</span>:
00087                     printf(<span class="stringliteral">"Internal Fail!\n"</span>);
00088               }
00089               <span class="keywordflow">for</span> (<a class="code" href="group__int__datatypes.html#ga15">Uint32</a> i = 1; i &lt;= count; i++) {
00090                   printf(<span class="stringliteral">"Seite: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>, i);
00091 
00092                   {
00093                       fstream::pos_type length = 0;
00094                       f.seekg(0, fstream::end);
00095                       length = f.tellg();
00096                       <span class="keywordflow">if</span> (<a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(length) &lt; (i+1) * DBJ_PAGE_SIZE) {
00097                           printf(<span class="stringliteral">"Page not found!\n"</span>);
00098                           <span class="keywordflow">goto</span> cleanup;
00099                       }
00100                   }
00101                   
00102                   <span class="comment">// Lies Seite</span>
00103                   f.seekg(i * DBJ_PAGE_SIZE, fstream::beg);
00104                   f.read(reinterpret_cast&lt;char *&gt;(buffer), DBJ_PAGE_SIZE);
00105                   <span class="keywordflow">if</span> (f.bad()) {
00106                       printf(<span class="stringliteral">"Lesefehler!\n"</span>);
00107                       <span class="keywordflow">goto</span> cleanup;
00108                   }
00109                   
00110                   <span class="comment">// richtige Zeiger auf entsprechende Brillen setzen</span>
00111                   header = reinterpret_cast&lt;DbjBTree::Header *&gt;(buffer);
00112                   <span class="comment">//fuer die Ausgabe der jeweiligen Eintraege</span>
00113                   <span class="keywordflow">if</span> (header-&gt;<a class="code" href="struct_dbj_b_tree_1_1_header.html#o1">type</a> == DbjBTree::LeafNode) {
00114                       leaf-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a0">setData</a>(header + 1);
00115                       countEntries = leaf-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a1">getHeader</a>()-&gt;countEntry;
00116                       printf(<span class="stringliteral">"  Leaf\n"</span>);
00117                       printf(<span class="stringliteral">"  CountEntries: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00118                               countEntries);
00119                       printf(<span class="stringliteral">"  Parent: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00120                               <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(leaf-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a1">getHeader</a>()-&gt;father));
00121                       printf(<span class="stringliteral">"  Left brother: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00122                               <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(leaf-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a1">getHeader</a>()-&gt;leftBrother));
00123                       printf(<span class="stringliteral">"  Right brother: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00124                               <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(leaf-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a1">getHeader</a>()-&gt;rightBrother));
00125 
00126                       <span class="keywordflow">for</span> (<a class="code" href="group__int__datatypes.html#ga15">Uint32</a> j = 0; j &lt; countEntries; j++) {
00127                           key = leaf-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a7">getKey</a>(j);
00128                           tupel = leaf-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a6">getReference</a>(j);
00129                           <span class="comment">//Schoene Ausgabe</span>
00130                           <span class="keywordflow">switch</span> (dataType) {
00131                             <span class="keywordflow">case</span> <a class="code" href="group__datatypes.html#gga0a33">INTEGER</a>:
00132                                 printf(<span class="stringliteral">"  Key: "</span> <a class="code" href="group__string__def.html#ga14">DBJ_FORMAT_SINT32</a>, key.<a class="code" href="class_dbj_index_key.html#o1">intKey</a>);
00133                                 printf(<span class="stringliteral">" "</span>);
00134                                 <span class="keywordflow">break</span>;
00135                             <span class="keywordflow">case</span> <a class="code" href="group__datatypes.html#gga0a32">VARCHAR</a>:
00136                                 printf(<span class="stringliteral">"  Key: %s"</span>, key.<a class="code" href="class_dbj_index_key.html#o2">varcharKey</a>);
00137                                 printf(<span class="stringliteral">" "</span>);
00138                                 <span class="keywordflow">break</span>;
00139                             <span class="keywordflow">case</span> <a class="code" href="group__datatypes.html#gga0a34">UnknownDataType</a>:
00140                                 printf(<span class="stringliteral">"Error!!!"</span>);
00141                                 <span class="keywordflow">break</span>;
00142                           }
00143                           printf(<span class="stringliteral">"  TupelId: {"</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">", "</span>
00144                                   <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"}\n"</span>, <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(tupel.<a class="code" href="struct_tuple_id.html#o0">page</a>),
00145                                   <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(tupel.<a class="code" href="struct_tuple_id.html#o1">slot</a>));
00146                       }
00147             
00148                   }
00149                   <span class="keywordflow">else</span> {
00150                       innerNode-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a0">setData</a>(header + 1);
00151                       countEntries = innerNode-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a1">getHeader</a>()-&gt;countEntry;
00152                       printf(<span class="stringliteral">"  InnerNode\n"</span>);
00153                       printf(<span class="stringliteral">"  CountEntries: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00154                               countEntries);
00155                       printf(<span class="stringliteral">"  Parent: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n\n"</span>,
00156                               <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(innerNode-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a1">getHeader</a>()-&gt;father));
00157                       printf(<span class="stringliteral">"  FirstLeft: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00158                               <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(innerNode-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a1">getHeader</a>()-&gt;firstLeft));
00159                       <span class="keywordflow">for</span> (<a class="code" href="group__int__datatypes.html#ga15">Uint32</a> j = 0; j &lt; countEntries; j++) {
00160                           key = innerNode-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a7">getKey</a>(j);
00161                           reference = innerNode-&gt;<a class="code" href="class_dbj_b_tree_1_1_node.html#a6">getReference</a>(j);
00162                           <span class="comment">//Schoene Ausgabe</span>
00163                           <span class="keywordflow">switch</span> (dataType) {
00164                             <span class="keywordflow">case</span> <a class="code" href="group__datatypes.html#gga0a33">INTEGER</a>:
00165                                 printf(<span class="stringliteral">"  Key: "</span> <a class="code" href="group__string__def.html#ga14">DBJ_FORMAT_SINT32</a>, key.<a class="code" href="class_dbj_index_key.html#o1">intKey</a>);
00166                                 printf(<span class="stringliteral">" "</span>);
00167                                 <span class="keywordflow">break</span>;
00168                             <span class="keywordflow">case</span> <a class="code" href="group__datatypes.html#gga0a32">VARCHAR</a>:
00169                                 printf(<span class="stringliteral">"  Key: %s"</span>, key.<a class="code" href="class_dbj_index_key.html#o2">varcharKey</a>);
00170                                 printf(<span class="stringliteral">" "</span>);
00171                                 <span class="keywordflow">break</span>;
00172                             <span class="keywordflow">case</span> <a class="code" href="group__datatypes.html#gga0a34">UnknownDataType</a>:
00173                                 printf(<span class="stringliteral">"Fehler: UnknownDataType"</span>);
00174                                 <span class="keywordflow">break</span>;
00175                           }
00176                           printf(<span class="stringliteral">"  PageId: "</span> <a class="code" href="group__string__def.html#ga12">DBJ_FORMAT_UINT32</a> <span class="stringliteral">"\n"</span>,
00177                                   <a class="code" href="group__int__datatypes.html#ga15">Uint32</a>(reference));
00178                       }
00179                   }
00180               }
00181 
00182           cleanup:
00183               f.close();
00184               <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00185           }
00186 };
00187 
00188 
<a name="l00189"></a><a class="code" href="print__btree_8cpp.html#a1">00189</a> <span class="keywordtype">int</span> <a class="code" href="create__btree_8cpp.html#a1">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])
00190 {
00191     <a class="code" href="class_dbj_error.html">DbjError</a> error;
00192     <a class="code" href="class_print_b_tree.html">PrintBTree</a> print;
00193     <span class="keywordtype">char</span>* file = NULL;
00194     <span class="keywordtype">char</span>* dt = NULL;
00195     <span class="keywordtype">int</span> check = 0;
00196     <a class="code" href="group__datatypes.html#ga0">DbjDataType</a> dataType = <a class="code" href="group__datatypes.html#gga0a34">UnknownDataType</a>;
00197 
00198     printf(<span class="stringliteral">"\nDatenTyp INTEGER = 1, VARCHAR = 2\n"</span>);
00199     <span class="keywordflow">if</span> (argc &lt;= 1) {
00200         printf(<span class="stringliteral">"Bitte Filenamen als Parameter eingeben!"</span>);
00201         <span class="keywordflow">goto</span> cleanup;
00202     }
00203     file = argv[1];
00204     dt = argv[2];
00205     printf(<span class="stringliteral">"\natoi-wert: %i"</span>, atoi(dt));
00206     check = atoi(dt);
00207     <span class="keywordflow">if</span> (check == 1) {
00208         dataType = <a class="code" href="group__datatypes.html#gga0a33">INTEGER</a>;
00209     }
00210     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (check == 2) {
00211         dataType = <a class="code" href="group__datatypes.html#gga0a32">VARCHAR</a>;
00212     }
00213     <span class="keywordflow">else</span> {
00214         printf(<span class="stringliteral">"\nDatentyp eingeben\n"</span>);
00215         <span class="keywordflow">goto</span> cleanup;
00216     }
00217     printf(<span class="stringliteral">"\nder eingegebene filename: %s"</span>,file);
00218     printf(<span class="stringliteral">"\nDataType: %s"</span>, dataType == <a class="code" href="group__datatypes.html#gga0a33">INTEGER</a> ? <span class="stringliteral">"INTEGER"</span> :
00219                       (dataType == <a class="code" href="group__datatypes.html#gga0a32">VARCHAR</a> ? <span class="stringliteral">"VARCHAR"</span> : <span class="stringliteral">"UnknownDataType"</span>));
00220     print.<a class="code" href="class_print_b_tree.html#a0">printBTree</a>(file, dataType);
00221 
00222  cleanup:    
00223     <span class="keywordflow">return</span> 0;
00224 }
00225 
00226 
00227 <span class="comment">// ############# Dummy-Treiber fuer den Lock Manager ####################</span>
00228 
00229 <span class="preprocessor">#include "<a class="code" href="_dbj_lock_manager_8hpp.html">DbjLockManager.hpp</a>"</span>
00230 
00231 <a class="code" href="class_dbj_lock_manager.html">DbjLockManager</a> *DbjLockManager::instance;
<a name="l00232"></a><a class="code" href="class_dbj_lock_manager.html#d0">00232</a> <a class="code" href="class_dbj_lock_manager.html#d0">DbjLockManager::DbjLockManager</a>() { }
<a name="l00233"></a><a class="code" href="class_dbj_lock_manager.html#a0">00233</a> <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_lock_manager.html#a0">DbjLockManager::request</a>(<a class="code" href="group__tableid.html#ga0">SegmentId</a> <span class="keyword">const</span>, <a class="code" href="group__id__datatypes.html#ga0">PageId</a> <span class="keyword">const</span>,
00234         LockType <span class="keyword">const</span>)
00235 {
00236     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(<a class="code" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>);
00237     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00238 }
<a name="l00239"></a><a class="code" href="class_dbj_lock_manager.html#a1">00239</a> <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_lock_manager.html#a1">DbjLockManager::release</a>(<a class="code" href="group__tableid.html#ga0">SegmentId</a> <span class="keyword">const</span>, <a class="code" href="group__id__datatypes.html#ga0">PageId</a> <span class="keyword">const</span>)
00240 {
00241     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(<a class="code" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>);
00242     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00243 }
<a name="l00244"></a><a class="code" href="class_dbj_lock_manager.html#a2">00244</a> <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_lock_manager.html#a2">DbjLockManager::releaseAll</a>()
00245 {
00246     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(<a class="code" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>);
00247     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00248 }
<a name="l00249"></a><a class="code" href="class_dbj_lock_manager.html#a3">00249</a> <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_lock_manager.html#a3">DbjLockManager::existsLock</a>(<a class="code" href="group__tableid.html#ga0">SegmentId</a> <span class="keyword">const</span>, <a class="code" href="group__id__datatypes.html#ga0">PageId</a> <span class="keyword">const</span>,
00250         <span class="keywordtype">bool</span> &amp;exists)
00251 {
00252     exists = <span class="keyword">false</span>;
00253     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(<a class="code" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>);
00254     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00255 }
00256 
00257 <span class="comment">// ############# Dummy-Treiber fuer den Buffer Manager ####################</span>
00258 
00259 <span class="preprocessor">#include "<a class="code" href="_dbj_buffer_manager_8hpp.html">DbjBufferManager.hpp</a>"</span>
00260 
00261 <a class="code" href="class_dbj_buffer_manager.html">DbjBufferManager</a> *DbjBufferManager::instance;
00262 <a class="code" href="class_dbj_buffer_manager.html#d0">DbjBufferManager::DbjBufferManager</a>() { }
00263 <a class="code" href="group__tableid.html#ga0">SegmentId</a> <a class="code" href="class_dbj_buffer_manager.html#a10">DbjBufferManager::convertIndexIdToSegmentId</a>(
00264         <span class="keyword">const</span> <a class="code" href="group__tableid.html#ga5">IndexId</a> indexId)<span class="keyword"> const</span>
00265 <span class="keyword"></span>{
00266     <span class="keywordflow">return</span> indexId;
00267 }
00268 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_buffer_manager.html#a0">DbjBufferManager::createSegment</a>(<span class="keyword">const</span> <a class="code" href="group__tableid.html#ga0">SegmentId</a>)
00269 {
00270     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00271     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00272 }
00273 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_buffer_manager.html#a1">DbjBufferManager::dropSegment</a>(<span class="keyword">const</span> <a class="code" href="group__tableid.html#ga0">SegmentId</a>)
00274 {
00275     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00276     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00277 }
00278 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_buffer_manager.html#a2">DbjBufferManager::openSegment</a>(<span class="keyword">const</span> <a class="code" href="group__tableid.html#ga0">SegmentId</a>)
00279 {
00280     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00281     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00282 }
00283 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_buffer_manager.html#a3">DbjBufferManager::getPage</a>(<span class="keyword">const</span> <a class="code" href="group__tableid.html#ga0">SegmentId</a>, <span class="keyword">const</span> <a class="code" href="group__id__datatypes.html#ga0">PageId</a>,
00284         DbjPage::PageType, <a class="code" href="class_dbj_page.html">DbjPage</a>*&amp;)
00285 {
00286     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00287     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00288 }
00289 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_buffer_manager.html#a4">DbjBufferManager::getNewPage</a>(<span class="keyword">const</span> <a class="code" href="group__tableid.html#ga0">SegmentId</a>, <span class="keyword">const</span> <a class="code" href="group__id__datatypes.html#ga0">PageId</a>,
00290         DbjPage::PageType, <a class="code" href="class_dbj_page.html">DbjPage</a>*&amp;)
00291 {
00292     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00293     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00294 }
00295 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_buffer_manager.html#a5">DbjBufferManager::releasePage</a>(<a class="code" href="class_dbj_page.html">DbjPage</a> *&amp;)
00296 {
00297     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00298     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00299 }
00300 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_buffer_manager.html#a7">DbjBufferManager::flush</a>()
00301 {
00302     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00303     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00304 }
00305 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_buffer_manager.html#a8">DbjBufferManager::discard</a>()
00306 {
00307     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00308     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00309 }
00310 <a class="code" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> <a class="code" href="class_dbj_page.html#a5">DbjPage::markAsModified</a>()
00311 {
00312     <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(DBJ_INTERNAL_FAIL);
00313     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00314 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Jul 4 15:40:31 2005 for Jenas Datenbanksystem 'System J' by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
