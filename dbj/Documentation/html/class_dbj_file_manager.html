<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Jenas Datenbanksystem &apos;System J&apos;: DbjFileManager Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>DbjFileManager Class Reference</h1>File Manager.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>&gt;</code>
<p>
<a href="class_dbj_file_manager-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#a0">create</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segment)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erzeuge neue Datei.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#a1">drop</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segment)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loechen einer existierenden Datei.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#a2">open</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segment)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Oeffnen einer existierenden Datei.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#a3">close</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segment)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schliessen einer geoeffneten Datei.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#a4">read</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segment, const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> pageId, unsigned char *buffer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lies Seite.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#a5">write</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segment, const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> pageId, const unsigned char *buffer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schreibe Seite.  <a href="#a5"></a><br></td></tr>
<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_dbj_file_manager.html">DbjFileManager</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#e0">getInstance</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gib Instanz fuer File Manager.  <a href="#e0"></a><br></td></tr>
<tr><td colspan=2><br><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::set&lt; <a class="el" href="struct_dbj_file_manager_1_1_file_segment.html">FileSegment</a>,<br>
 <a class="el" href="struct_dbj_file_manager_1_1_file_segment_compare.html">FileSegmentCompare</a> &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#y0">FileList</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Datentyp fuer die Dateiliste.  <a href="#y0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::set&lt; <a class="el" href="struct_dbj_file_manager_1_1_file_segment.html">FileSegment</a>,<br>
 <a class="el" href="struct_dbj_file_manager_1_1_file_segment_compare.html">FileSegmentCompare</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#y1">FileListIterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Datentyp fuer Iterator ueber der Dateiliste.  <a href="#y1"></a><br></td></tr>
<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#d0">DbjFileManager</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Konstruktor.  <a href="#d0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#d1">~DbjFileManager</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destruktor.  <a href="#d1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#d2">exists</a> (const char *<a class="el" href="class_dbj_file_manager.html#r1">fileName</a>) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Existiert Datei?  <a href="#d2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#d3">getFileName</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segmentId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generiere Dateinamen.  <a href="#d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_dbj_file_manager.html#y1">FileListIterator</a> const&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#d4">findFileInList</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segmentId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finde Datei in Liste.  <a href="#d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#d5">getFileHandle</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segmentId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gib File Handle.  <a href="#d5"></a><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_dbj_file_manager.html#y0">FileList</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#r0">openFiles</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Liste der geoeffneten Dateien.  <a href="#r0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#r1">fileName</a> [1000]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Puffer fuer generierte Dateinamen.  <a href="#r1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="group__int__datatypes.html#ga15">Uint32</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#r2">segmentOffset</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Offset in "fileName" an welchen die Segmentnummer geschrieben wird (= 0 bedeutet, dass wir den Datenbankpfad noch nicht gesetzt haben).  <a href="#r2"></a><br></td></tr>
<tr><td colspan=2><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_dbj_file_manager.html">DbjFileManager</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_file_manager.html#v0">instance</a> = NULL</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Zeiger auf die eine Instanz des Index Manager.  <a href="#v0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
File Manager. 
<p>
Der File Manager (FM) erlaubt das Anlegen, Loeschen, Oeffnen, Schliessen, Schreiben und Lesen von Dateien auf dem Sekundaerspeichermedium (UNIX-/Windows-Filesystem). Die Verwaltung der Dateien obliegt dabei vollstaendig dem File Manager, und dieser erhaelt nur Informationen ueber die zu verarbeitenden Segmente. Die Abbildung von Segment-IDs auf Dateien ist alleinige Sache des FM. Der File Manager verwaltet eine Liste (Menge) von den derzeit genutzen Dateien.<p>
Eine Datei entspricht immer genau einem Segment. Alle Datein werden in das Verzeichnis angelegt, dass durch die Umgebungsvariable <code>DBJ_DATABASE_PATH</code> spezifiziert wurde. Ist diese Umgebungsvariable nicht gesetzt, so wird als Default der Konfigurationsparameter <code>DBJ_DEFAULT_DATABASE_PATH</code> konsultiert.<p>
Die Lese- und Schreiboperationen ermoeglichen an beliebiger Stelle (wahlfrei) in der Datei einen Block (= Seite) zu lesen bzw. zu schreiben. Bloecke/Seiten werden mit 0 .. N nummeriert.<p>
Der File Manager verwaltet alle Dateien des Datenbank-Management-Systems (DBMS), demzufolge gibt es auch nur eine Instanz von ihm in einer Transaktion. Diese Instanz muss alle derzeit von der Transaktion verwendeten Dateien verwalten. Der BufferManager (BM) ist die einzige Komponente, die den File Manager verwendet, um Datenbankseiten zu lesen oder zu schreiben. 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00044">44</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="y0" doxytag="DbjFileManager::FileList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::set&lt;<a class="el" href="struct_dbj_file_manager_1_1_file_segment.html">FileSegment</a>, <a class="el" href="struct_dbj_file_manager_1_1_file_segment_compare.html">FileSegmentCompare</a>&gt; <a class="el" href="class_dbj_file_manager.html#y0">DbjFileManager::FileList</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Datentyp fuer die Dateiliste. 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00204">204</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="y1" doxytag="DbjFileManager::FileListIterator" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::set&lt;<a class="el" href="struct_dbj_file_manager_1_1_file_segment.html">FileSegment</a>, <a class="el" href="struct_dbj_file_manager_1_1_file_segment_compare.html">FileSegmentCompare</a>&gt;::iterator <a class="el" href="class_dbj_file_manager.html#y1">DbjFileManager::FileListIterator</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Datentyp fuer Iterator ueber der Dateiliste. 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00206">206</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="d0" doxytag="DbjFileManager::DbjFileManager" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DbjFileManager::DbjFileManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Konstruktor. 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00217">217</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.
<p>
References <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">openFiles</a>, and <a class="el" href="_dbj_file_manager_8hpp-source.html#l00214">segmentOffset</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="DbjFileManager::~DbjFileManager" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DbjFileManager::~<a class="el" href="class_dbj_file_manager.html">DbjFileManager</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destruktor. 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00025">25</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00206">FileListIterator</a>, <a class="el" href="_dbj_file_manager_8cpp-source.html#l00021">instance</a>, and <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">openFiles</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a3" doxytag="DbjFileManager::close" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjFileManager::close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>segment</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Schliessen einer geoeffneten Datei. 
<p>
Schliesse eine zuvor geoeffnete Datei fuer das angegebene Segment. Dabei nimmt der File Manager eine Abbildung der Segment-ID auf einen Dateinamen vor und die entsprechende Datei wird anschliessend auch geschlossen.<p>
Wurde die Datei noch nicht geoeffnet, so wird dies als Fehler interpretiert.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segment</em>&nbsp;</td><td>ID des Segments dem die Datei zugeordnet ist </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00192">192</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a88">DBJ_FM_FILE_CLOSE_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00261">DBJ_SET_ERROR_TOKEN1</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00206">FileListIterator</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00261">findFileInList()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">openFiles</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="DbjFileManager::create" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjFileManager::create           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>segment</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Erzeuge neue Datei. 
<p>
Erzeuge eine neue, noch nicht existierende Datei fuer das angegebene Segment. Dabei muss der File Manager eine Abbildung der Segment-ID auf einen Dateinamen vornehmen und die Datei anschliessend auch anlegen. Die Datei wird initial als leere Datei angelegt. Nachfolgende Aufrufe von "write" muessen dazu verwendet werden, den Inhalt der Datei festzulegen. So muss beispielsweise der Buffer Manager die Freispeicherliste nach dem "create" erzeugen, und dadurch waechst die Datei.<p>
Diese Methode wird beispielsweise bei einem CREATE TABLE oder CREATE INDEX benoetigt, wenn ein neues Segment erzeugt wird.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segment</em>&nbsp;</td><td>ID des Segments dem die neue Datei zugeordnet ist </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00045">45</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a81">DBJ_FM_FILE_ALREADY_EXISTS</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a85">DBJ_FM_FILE_CREATE_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00261">DBJ_SET_ERROR_TOKEN1</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_file_manager_8cpp-source.html#l00341">exists()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00261">findFileInList()</a>, <a class="el" href="_dbj_file_manager_8cpp-source.html#l00361">getFileName()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">openFiles</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="DbjFileManager::drop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjFileManager::drop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>segment</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Loechen einer existierenden Datei. 
<p>
Loesche eine existierende Datei fuer das angegebene Segment. Dabei muss der File Manager eine Abbildung der Segment-ID auf einen Dateinamen vornehmen und die Datei anschliessend auch aus dem Dateisystem entfernen. Die zu loeschende Datei muss zuvor bereits geschlossen bzw. sie darf nicht geoeffnet sein.<p>
Diese Methode wird beispielsweise bei einem DROP TABLE oder DROP INDEX benoetigt.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segment</em>&nbsp;</td><td>ID des Segments dem die Datei zugeordnet ist </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00091">91</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a86">DBJ_FM_FILE_DROP_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a80">DBJ_FM_FILE_NOT_FOUND</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a83">DBJ_FM_FILE_STILL_OPEN</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00261">DBJ_SET_ERROR_TOKEN1</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_file_manager_8cpp-source.html#l00341">exists()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00261">findFileInList()</a>, <a class="el" href="_dbj_file_manager_8cpp-source.html#l00361">getFileName()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">openFiles</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="DbjFileManager::exists" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool DbjFileManager::exists           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fileName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Existiert Datei? 
<p>
Ueberpruefe, ob die angegebene Datei bereits existiert. Es wird versucht, die Datei zu oeffnen, und wenn das Oeffnen fehlschlaegt, so wird "false" zurueckgegeben. Andernfalls ist das Ergebnis "true".<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>fileName</em>&nbsp;</td><td>Name der zu pruefenden Datei </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00341">341</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, and <a class="el" href="_dbj_trace_8hpp-source.html#l00238">DBJ_TRACE_STRING</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="DbjFileManager::findFileInList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_dbj_file_manager.html#y1">FileListIterator</a> const DbjFileManager::findFileInList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>segmentId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Finde Datei in Liste. 
<p>
Finde die Datei des angegebenen Segments in der Liste der geoeffneten Dateien. Als Ergebnis dieser Operation ein Iterator auf den entsprechenden Eintrag zurueckgegeben. Ist dieser Iterator gleich <code>openFiles.end()</code>, so wurde kein Eintrag gefunden; andernfalls kann man mit dem Derefenzieren des Iterators auf den Eintrag zugreifen.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segmentId</em>&nbsp;</td><td>ID des zu suchenden Segments </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00261">261</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.
<p>
References <a class="el" href="_dbj_file_manager_8hpp-source.html#l00206">FileListIterator</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">openFiles</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00187">DbjFileManager::FileSegment::segmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="DbjFileManager::getFileHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void* DbjFileManager::getFileHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>segmentId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gib File Handle. 
<p>
Diese Methode gibt den File Handle (<code>fstream *</code>) der Datei fuer das angegebene Segment zurueck. Wurde die Datei noch nicht geoeffnet, so wird ein NULL-Zeiger zurueckgegeben, aber kein Fehler gesetzt.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segmentId</em>&nbsp;</td><td>ID des Segments zu dem der File Handle gesucht wird </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00277">277</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.
<p>
References <a class="el" href="_dbj_file_manager_8hpp-source.html#l00206">FileListIterator</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00261">findFileInList()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">openFiles</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="DbjFileManager::getFileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const char * DbjFileManager::getFileName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>segmentId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generiere Dateinamen. 
<p>
Generiere den Namen der Datei, die die Daten fuer das angegebene Segment enthaelt bzw. aufnehmen wird. Der erzeugte Name wird intern im Puffer "fileName" hinterlegt und ist so lange gueltig, bis diese Methode hier erneut aufgerufen wird.<p>
Der Name der Datei setzt sich aus dem Pfad und dem Dateinamen zusammen. Der Pfad wird bestimmt durch die Umgebungsvariable <code>DBJ_DATABASE_PATH</code> bzw. dem Konfigurationsparameter <code>DBJ_DEFAULT_DATABASE_PATH</code> fuer den Fall, dass die Umgebungsvariable nicht gesetzt ist. Der Dateiname im Datenbankpfad hat das Format "SegXXX.dbj", wobei "XXX" fuer die interne Nummer des Segments steht.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segmentId</em>&nbsp;</td><td>ID des Segments fuer den die Datei gefunden wird </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00361">361</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_8hpp-source.html#l00042">DBJ_DIGITS_OF_TYPE</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a91">DBJ_FM_PATH_TOO_LONG</a>, <a class="el" href="_dbj_string_8hpp-source.html#l00139">DBJ_FORMAT_UINT32</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00238">DBJ_TRACE_STRING</a>, <a class="el" href="_dbj_memory_manager_8hpp-source.html#l00448">DbjMemSet()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00211">fileName</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00214">segmentOffset</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>.    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="DbjFileManager::getInstance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_dbj_file_manager.html">DbjFileManager</a>* DbjFileManager::getInstance           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gib Instanz fuer File Manager. 
<p>
Diese Methode liefert die eine Instanz des File Managers.<p>
Der File Manager existiert genau einmal im aktuellen Prozess/Transaktion, der die SQL Anweisung abarbeitet. Um zu vermeiden, dass mehrere potentiell konkurrierende Instanzen existieren, wird das Singleton Design Pattern eingesetzt. Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00056">56</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.
<p>
References <a class="el" href="_dbj_file_manager_8cpp-source.html#l00021">instance</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="DbjFileManager::open" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjFileManager::open           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>segment</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Oeffnen einer existierenden Datei. 
<p>
Oeffne eine existierende Datei fuer das angegebene Segment. Dabei nimmt der File Manager eine Abbildung der Segment-ID auf einen Dateinamen vor und oeffnet die Datei anschliessend.<p>
Wurde das Segment bereits vorher geoeffent, so wird dies nicht als Fehler angesehen.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segment</em>&nbsp;</td><td>ID des Segments dem die Datei zugeordnet ist </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00133">133</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a80">DBJ_FM_FILE_NOT_FOUND</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a87">DBJ_FM_FILE_OPEN_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00261">DBJ_SET_ERROR_TOKEN1</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_file_manager_8cpp-source.html#l00341">exists()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00261">findFileInList()</a>, <a class="el" href="_dbj_file_manager_8cpp-source.html#l00361">getFileName()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00189">DbjFileManager::FileSegment::handle</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">openFiles</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00187">DbjFileManager::FileSegment::segmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="DbjFileManager::read" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjFileManager::read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>segment</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pageId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Lies Seite. 
<p>
Lies die angegebene Seite aus der Datei, die zu dem Segment gehoert. Die Seite wird in den vom Aufrufer zur Verfuegung gestellten Speicherbereich gelesen. Die Methode liest genau die Anzahl von Bytes, die <code>DBJ_PAGE_SIZE</code> spezifiziert, und schreibt diese in den Speicher.<p>
Der File Manager bildet die Segment ID auf die zugehoerige Datei ab, und anschliessend wird die Seite in der Datei gesucht und direkt in den vom Aufrufer zur Verfuegung gestellten Puffer gelesen.<p>
Der Aufrufer darf nicht versuchen, eine Seite aus der Datei zu lesen, die ueberhaupt nicht existiert, d.h. es darf nicht ueber das Ende der Datei hinaus gelesen werden.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segment</em>&nbsp;</td><td>Segment aus dem die Seite gelesen werden soll </td></tr>
    <tr><td></td><td valign=top><em>pageId</em>&nbsp;</td><td>Nummer der Seite in der Datei/Segment </td></tr>
    <tr><td></td><td valign=top><em>buffer</em>&nbsp;</td><td>Speicherbereich (bereits allokiert!) in den die Seitendaten gelesen werden soll </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00222">222</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a92">DBJ_FM_FILE_INVALID_SIZE</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a82">DBJ_FM_FILE_NOT_OPEN</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a89">DBJ_FM_FILE_READ_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a84">DBJ_FM_PAGE_NOT_EXISTS</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00261">DBJ_SET_ERROR_TOKEN1</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00278">DBJ_SET_ERROR_TOKEN3</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00277">getFileHandle()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="DbjFileManager::write" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjFileManager::write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>segment</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pageId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Schreibe Seite. 
<p>
Schreibe die angegeben Seite in die Datei, die zu dem Segment gehoert. Die Seite wird aus den vom Aufrufer zur Verfuegung gestellten Speicherbereich geschrieben. Die Methode schreibt genau die Anzahl von Bytes, die <code>DBJ_PAGE_SIZE</code> spezifiziert, und liest diese von den Speicher.<p>
Bei Bedarf wird die zu Grunde liegende Datei dynamisch vergroessert. Das heisst, wenn die bisher existierende Datei zu klein ist, und der Aufrufer (Buffer Manager) weitere Seiten im Segment erzeugen will, so muss er lediglich eine entsprechende Seitenummer angeben und die Datei wird entsprechend vergroessert bzw. die Daten werden ans Ende der Datei angehaengt. Dabei ist zu beachten, dass die Seitennummern nicht zwangsweise lueckenlos vergeben werden muessen. So ist es moeglich, dass Seite 1, 2, 3 und 4 bereits existieren und der naechste Aufruf von "write" soll fuer Seite 8 erfolgen. Dann hat die resultierende Datei auch 8 Seiten, wobei die Seiten 5, 6 und 7 noch nicht genutzt werden (aber das ist fuer den File Manager sowieso irrelevant).<p>
Der File Manager bildet von der Segment ID auf die zugehoerige Datei ab, und anschliessend wird die Position der Seite in der Datei gesucht und die Seitendaten geschrieben.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segment</em>&nbsp;</td><td>Segment in das die Seite geschrieben werden soll </td></tr>
    <tr><td></td><td valign=top><em>pageId</em>&nbsp;</td><td>Nummer der Seite in der Datei/Segment </td></tr>
    <tr><td></td><td valign=top><em>buffer</em>&nbsp;</td><td>Speicherbereich in dem die zu schreibenden Daten stehen </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00280">280</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a92">DBJ_FM_FILE_INVALID_SIZE</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a82">DBJ_FM_FILE_NOT_OPEN</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a90">DBJ_FM_FILE_WRITE_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00261">DBJ_SET_ERROR_TOKEN1</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00278">DBJ_SET_ERROR_TOKEN3</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_file_manager_8hpp-source.html#l00277">getFileHandle()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r1" doxytag="DbjFileManager::fileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="class_dbj_file_manager.html#r1">DbjFileManager::fileName</a>[1000]<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Puffer fuer generierte Dateinamen. 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00211">211</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v0" doxytag="DbjFileManager::instance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_dbj_file_manager.html">DbjFileManager</a> * <a class="el" href="class_dbj_file_manager.html#v0">DbjFileManager::instance</a> = NULL<code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Zeiger auf die eine Instanz des Index Manager. 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8cpp-source.html#l00021">21</a> of file <a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="DbjFileManager::openFiles" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_dbj_file_manager.html#y0">FileList</a> <a class="el" href="class_dbj_file_manager.html#r0">DbjFileManager::openFiles</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Liste der geoeffneten Dateien. 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00208">208</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="DbjFileManager::segmentOffset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="group__int__datatypes.html#ga15">Uint32</a> <a class="el" href="class_dbj_file_manager.html#r2">DbjFileManager::segmentOffset</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Offset in "fileName" an welchen die Segmentnummer geschrieben wird (= 0 bedeutet, dass wir den Datenbankpfad noch nicht gesetzt haben). 
<p>
Definition at line <a class="el" href="_dbj_file_manager_8hpp-source.html#l00214">214</a> of file <a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_dbj_file_manager_8hpp-source.html">DbjFileManager.hpp</a><li><a class="el" href="_dbj_file_manager_8cpp-source.html">DbjFileManager.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jul 4 15:40:33 2005 for Jenas Datenbanksystem 'System J' by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
