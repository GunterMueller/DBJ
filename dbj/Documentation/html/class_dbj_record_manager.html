<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Jenas Datenbanksystem &apos;System J&apos;: DbjRecordManager Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>DbjRecordManager Class Reference</h1>Record Manager.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>&gt;</code>
<p>
<a href="class_dbj_record_manager-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a0">createTable</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erstelle neue Tabelle.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a1">dropTable</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loesche Tabelle.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a2">insert</a> (const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;record, const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;tupleId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fuege neuen Record ein.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a3">remove</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;tupleId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loeschen eines Records.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a4">replace</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;tupleId, const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;record)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ersetzen eines Records.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a5">get</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;tupleId, <a class="el" href="class_dbj_record.html">DbjRecord</a> *&amp;record)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stellt einen Record zur Verfuegung (Bereitstellen).  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a6">getRecordIterator</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, <a class="el" href="class_dbj_record_iterator.html">DbjRecordIterator</a> *&amp;iter)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gib Iterator fuer Table-Scan.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a7">commit</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Festschreiben aller modifizerten Records.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a8">rollback</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verwerfe alle Modifikationen.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a9">dumpTableContent</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Darstellung der Tabellen-Daten.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#a10">dumpPageContent</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> pageId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Darstellung der Seitendaten.  <a href="#a10"></a><br></td></tr>
<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_dbj_record_manager.html">DbjRecordManager</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#e0">getInstance</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gib Instanz fuer den Record Manager.  <a href="#e0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#e1">compareSlotsByOffset</a> (const void *s1, const void *s2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Vergleiche zwei Slots.  <a href="#e1"></a><br></td></tr>
<tr><td colspan=2><br><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#y3">RecordType</a> { <a class="el" href="class_dbj_record_manager.html#y3y0">PrimaryRecord</a>, 
<a class="el" href="class_dbj_record_manager.html#y3y1">SecondaryRecord</a>, 
<a class="el" href="class_dbj_record_manager.html#y3y2">PlaceHolderTid</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Typ-Identifikator von Records.  <a href="#y3">More...</a><br></td></tr>
<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d0">DbjRecordManager</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Konstruktor.  <a href="#d0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d1">~DbjRecordManager</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destruktor.  <a href="#d1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d2">getFsiPageId</a> (const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> pageId) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Berechne FSI-Seitennummer.  <a href="#d2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const <a class="el" href="group__int__datatypes.html#ga15">Uint32</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d3">getFsiSlot</a> (const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> pageId) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Berechne <a class="el" href="struct_dbj_record_manager_1_1_slot.html">Slot</a> fuer die Seite im FSI.  <a href="#d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d4">markNotExists</a> (<a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;fsiEntry) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Markiere FSI-Eintrag fuer nicht-existierende Seite.  <a href="#d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d5">markEmptyPage</a> (<a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;fsiEntry) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Markiere FSI-Eintrag fuer leere Seite.  <a href="#d5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d6">pageAlreadyExists</a> (<a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;fsiEntry) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bestimme, ob Seite bereits existiert.  <a href="#d6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d7">addFsiEntry</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> pageId, const <a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;pageInfo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Trage Seite in FSI ein.  <a href="#d7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d8">updateFreeSpace</a> (<a class="el" href="class_dbj_page.html">DbjPage</a> *page)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Aktualisiere Freiplatzinformationen.  <a href="#d8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d9">reorganizePage</a> (<a class="el" href="class_dbj_page.html">DbjPage</a> *page, <a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;freeSpace, <a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;freeSpaceOffset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reorganisiere Seite.  <a href="#d9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d10">updateFsiEntry</a> (const <a class="el" href="group__tableid.html#ga0">SegmentId</a> segmentId, const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> pageToEdit, const <a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;newPageInfo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Aendert Eintrag im FSI.  <a href="#d10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d11">findFsiEntry</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> pageToFind, <a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;pageInfo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Suche Eintrag im FSI.  <a href="#d11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d12">findFreeMemoryBlock</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="group__int__datatypes.html#ga9">Uint16</a> numBytes, <a class="el" href="group__id__datatypes.html#ga0">PageId</a> &amp;freePage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Suche nach Freiplatz in Seite.  <a href="#d12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d13">findLargestFreeSpaceInPage</a> (const <a class="el" href="class_dbj_page.html">DbjPage</a> *page, <a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;maxBlockOffset, <a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;maxBlockSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bestimme Ort des groessten freien Blocks in der Seite.  <a href="#d13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d14">findFreeSpaceInPage</a> (const <a class="el" href="class_dbj_page.html">DbjPage</a> *page, <a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;freeSpace)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bestimme Freiplatz in Seite.  <a href="#d14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d15">getNewPageId</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, <a class="el" href="group__id__datatypes.html#ga0">PageId</a> &amp;pageId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erstellt neue PageId.  <a href="#d15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d16">findNextRecord</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;tupleId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Funktion, zum Findes des naechsten Records.  <a href="#d16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d17">insert</a> (const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;record, const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="class_dbj_record_manager.html#y3">RecordType</a> type, <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;tupleId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fuege Record ein.  <a href="#d17"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d18">replace</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;tupleId, const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;record, <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;newTid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ersetze Record.  <a href="#d18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d19">get</a> (const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;tupleId, const bool primaryOnly, <a class="el" href="class_dbj_record.html">DbjRecord</a> *&amp;record)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hole Record.  <a href="#d19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#d20">getRecordOffsetOnPage</a> (const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;record, const <a class="el" href="group__tableid.html#ga1">TableId</a> tableId, const <a class="el" href="struct_tuple_id.html">TupleId</a> tupleId, <a class="el" href="class_dbj_page.html">DbjPage</a> *page, <a class="el" href="struct_dbj_record_manager_1_1_slot.html">Slot</a> *slot, <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;newTupleId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finde Lokation fuer wachsenden Record.  <a href="#d20"></a><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_dbj_buffer_manager.html">DbjBufferManager</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#r0">bufferMgr</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Zeiger auf die Instanz des Buffer Managers.  <a href="#r0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_dbj_lock_manager.html">DbjLockManager</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#r1">lockMgr</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Zeiger auf die Instanz des Lock Managers.  <a href="#r1"></a><br></td></tr>
<tr><td colspan=2><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_dbj_record_manager.html">DbjRecordManager</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#v0">instance</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Zeiger auf die eine Instanz des Record Managers.  <a href="#v0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const <a class="el" href="group__int__datatypes.html#ga3">Uint8</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#v1">MAX_SLOTS</a> = <a class="el" href="group__int__datatypes.html#ga5">DBJ_MAX_UINT8</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximale Anzahl der Slots auf einer Seite.  <a href="#v1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const <a class="el" href="group__int__datatypes.html#ga9">Uint16</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#v2">FSI_BLOCK_SIZE</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Blockgroesse im FSI.  <a href="#v2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const <a class="el" href="group__int__datatypes.html#ga15">Uint32</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_record_manager.html#v3">MAX_FSI_ENTRIES</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximale Anzahl von Eintraegen, die in einer FSI-Seite moeglich sind.  <a href="#v3"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Record Manager. 
<p>
Der Record Manager (RM) ist fuer die Abbildung von Records auf Datenbankseiten zustaendig und setzt dafuer direkt auf den Buffer Manager auf, verwendet also nur dessen Methoden.<p>
Der Record Manager verwaltet ausschliesslich Records, die aus einfachen Byte-Strings bestehen, d.h. er kennt nicht den internen Aufbau eines Records, wie beispielsweise die Anzahl und Laenge der einzelnen Attribute. Die Interpretation der Record-Struktur und des Record-Inhalts uebernimmt der Aufrufer des Record Managers (ueblicherweise die RunTime). Dafuer wird der Catalog Manager mit herangezogen, welcher die Metadaten (Tabellen-Deskriptor) in Form von Instanzen der <a class="el" href="class_dbj_table.html">DbjTable</a> Klasse bereitstellt. Damit kann ein Record in ein Tuple (<a class="el" href="class_dbj_tuple.html">DbjTuple</a> Klasse) umgewandelt werden.<p>
Ein Record wird Tuple-ID (TID) eindeutig identifiziert und beinhaltet die Table-Id, Page-Id und Slot-Id. Der Record Manager verwaltet hauptsaechlich das Erstellen, Bereitstellen, Ersetzen und Loeschen von Records auf den Datenbankseiten. Die interne Stukturierung der Seiten und die Verwaltung der Records in den Seiten obliegt dabei ausschliesslich dem Record Manager.<p>
Beim Bereitstellen eines Records - in Form eines <a class="el" href="class_dbj_record.html">DbjRecord</a> Objektes - erhaelt der Aufrufer eine Kopie der Daten auf der zu Grunde liegenden Seite. Die Seite selbst wird vom Buffer Manager verwaltet, und dieser kann nach dem Lesen des Records die Seite auch wieder verdraengen.<p>
Das Oeffnen und Schliessen von Segmenten wird durch den Record Manager automatisch vorgenommen - bei Anforderung des ersten Records des Segments wird das Segment geoeffnet. Das Segment bleibt geoeffnet, bis die Transaktion beendet ist oder der Record Manager sich selbst beendet.<p>
Zusaetzlich zu den eigentlichen Datenseiten eines Segments verwaltet der Record Manager auch noch ein Freispeicherverzeichnis fuer jedes Segment. Das Freispeicherverzeichnis wird auf Seiten im Segment abgelegt (der Record Manager fuehrt es nicht im Hauptspeicher mit!), und es vermerkt wieviel freier bzw. belegter Speicher auf den einzelnen Datenseiten im Segment vorhanden ist. Um den Speicherbedarf fuer das Freispeicherverzeichnis zu reduzieren (und damit die Performance zu verbessern), fuehrt das Verzeichnis nicht genau Buch ueber jedes einzelne Byte auf den Seiten, sondern waehlt jeweils groessere Bloecke. Somit muss das Freispeicherverzeichnis nicht bei jeder kleinen Aenderung aktualisiert werden, und es wird auch nur 1 Byte fuer die Freiplatzangaben benoetigt, anstatt 2 Byte.<p>
Anmerkung: Natuerlich sind die Informationen ueber belegten/freien Speicherplatz nochmal auf jeder einzelnen Datenseite vermerkt. Das Freispeicherverzeichnis bietet jedoch einen kompakten und schnellen Zugriff auf diese Informationen und vermeidet dadurch den Zugriff auf die einzelnen Seiten wenn freier Platz gesucht wird.<p>
Weiterhin ist der Record Manager dafuer zustaendig, die jeweiligen Datenbankseiten ueber den Lock Manager entsprechend zu sperren, da er die Komponente ist, die weiss wo welcher Record/Tupel zu finden ist. Am Ende der Ausfuehrung einer Anweisung erhaelt der Record Manager ein "commit", um alle etwaigen Aenderungen persistent zu machen.<p>
Der Record Manager wird <em>nicht</em> vom Index Manager genutzt. Der Index Manager hat seine eigene Datenstruktur auf den Index Seiten, und verwaltet diese auch selbst. 
<p>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00086">86</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="y3" doxytag="DbjRecordManager::RecordType" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="class_dbj_record_manager.html#y3">DbjRecordManager::RecordType</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Typ-Identifikator von Records. 
<p>
Jeder Record auf einer Datenseite hat einen Typ. Ist es ein originaler Record, der nicht ausgelagert wurde, so ist der Typ "PrimaryRecord". Ein ausgelagerter Record wird als "SecondaryRecord" bezeichnet, und die Stellvertreter-TID wird durch ein "PlaceHolderTid" markiert. <dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="y3y0" doxytag="PrimaryRecord" ></a>PrimaryRecord</em>&nbsp;</td><td>
orginaler Record </td></tr>
<tr><td valign=top><em><a class="anchor" name="y3y1" doxytag="SecondaryRecord" ></a>SecondaryRecord</em>&nbsp;</td><td>
ausgelagerter Record </td></tr>
<tr><td valign=top><em><a class="anchor" name="y3y2" doxytag="PlaceHolderTid" ></a>PlaceHolderTid</em>&nbsp;</td><td>
Stellvertreter-TID die einen ausgelagerten Record identifiziert. </td></tr>
</table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00360">360</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="d0" doxytag="DbjRecordManager::DbjRecordManager" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DbjRecordManager::DbjRecordManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Konstruktor. 
<p>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00028">28</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_lock_manager_8hpp-source.html#l00051">DbjLockManager::getInstance()</a>, <a class="el" href="_dbj_buffer_manager_8hpp-source.html#l00096">DbjBufferManager::getInstance()</a>, and <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="DbjRecordManager::~DbjRecordManager" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DbjRecordManager::~<a class="el" href="class_dbj_record_manager.html">DbjRecordManager</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destruktor. 
<p>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00351">351</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8cpp-source.html#l00021">instance</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="d7" doxytag="DbjRecordManager::addFsiEntry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::addFsiEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pageId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>pageInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Trage Seite in FSI ein. 
<p>
Diese Methode traegt einen neuen Eintrag in das Freispeicherverzeichnis (FSI) ein. Bei Bedarf wird eine neue FSI-Seite angefordert und initialisiert, wenn es sie noch nicht gibt.<p>
Intern wird der entsprechende Eintrag im FSI gesucht und ueberprueft, dass er fuer eine noch-nicht-existierende Seite steht. Anschliessend werden die angegebenen FSI-Informationen hinterlegt.<p>
Als Daten sind in der FsiEntry-Struktur die Anzahl freier Bloecke (1 Block = FSI_BLOCK_SIZE Bytes) bzw. die Anzahl des groessten zusammenhaengenden Bloecke angegeben.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>Tabelle zu dem das FSI gehoert </td></tr>
    <tr><td></td><td valign=top><em>pageId</em>&nbsp;</td><td>Seitennummer, nach der gesucht werden soll </td></tr>
    <tr><td></td><td valign=top><em>pageInfo</em>&nbsp;</td><td>die Informationen fuer den Eintrag im FSI </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00704">704</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00486">DbjRecordManager::FsiPage::countEntries</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a70">DBJ_BM_PAGE_NOT_FOUND</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a57">DBJ_RM_FSI_ENTRY_NOT_ALLOWED</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00501">getFsiPageId()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00512">getFsiSlot()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00415">DbjBufferManager::getNewPage()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>, <a class="el" href="_dbj_page_8cpp-source.html#l00016">DbjPage::markAsModified()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00527">markNotExists()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00022">MAX_FSI_ENTRIES</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00568">pageAlreadyExists()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00488">DbjRecordManager::FsiPage::pageInfo</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="print__btree_8cpp-source.html#l00233">DbjLockManager::request()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="DbjRecordManager::commit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::commit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Festschreiben aller modifizerten Records. 
<p>
Schreibt saemtliche noch nicht festgeschriebenen Records der Transaktion auf Platte bzw. macht Loeschungen permanent. Damit wird die COMMIT-Funktionalitaet bei INSERT und DELETE-Operationen realisiert.<p>
Intern wird der Buffer Manager ueber <a class="el" href="class_dbj_buffer_manager.html#a7">DbjBufferManager::flush</a> aufgerufen. Der Buffer Manager kennt die Liste der geaenderten Seiten und kann diese auf Platte schreiben. Zusaetzlich werden alle Sperren ueber den Lock Manager freigegeben. Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00658">658</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00651">DbjBufferManager::flush()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>, and <a class="el" href="print__btree_8cpp-source.html#l00244">DbjLockManager::releaseAll()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="e1" doxytag="DbjRecordManager::compareSlotsByOffset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int DbjRecordManager::compareSlotsByOffset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>s1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>s2</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Vergleiche zwei Slots. 
<p>
Vergleiche zwei gegebene Slot-Eintraege entsprechend dem Offset der beiden Eintraege. Diese Methode wird waehrend des "qsort" in "findLargestFreeSpaceInPage" genutzt, um ein Array von Slot-Eintraegen zu sortieren.<p>
Diese Methode ist als static und public deklariert, damit die Methode auch von der Funktion aufgerufen werden kann, deren Funktions-Zeiger an "qsort" uebergeben wird. (Diese Funktion kann keine Methode des Record Managers sein.)<p>
Beachte: Die Offsets sind immer unterschiedlich, so dass kein Vergleich auf Gleichheit noetig ist. Die Ausnahme ist, wenn ein Record direkt hinter der Slot-Tabelle beginnt, und dann spielt das Tauschen der Eintraege auch keien Rolle.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>s1</em>&nbsp;</td><td>Zeiger auf den ersten Slot-Eintrag </td></tr>
    <tr><td></td><td valign=top><em>s2</em>&nbsp;</td><td>Zeiger auf den zweiten Slot-Eintrag </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00868">868</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="DbjRecordManager::createTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::createTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tableId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Erstelle neue Tabelle. 
<p>
Fuege ein neues Segment hinzu und initialisiere es fuer die Verwendung als Tabelle. Sollte die Tabelle "tableId" schon existieren, so wird der Fehler <code>DBJ_RM_TABLE_ALREADY_EXISTS</code> zurueckgegeben.<p>
Die Tabellen-ID wird ausschliesslich vom Catalog Manager generiert und muss hier als Eingabeparameter mit angegeben werden.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der anzulegenden Tabelle </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00038">38</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00188">DbjBufferManager::createSegment()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a81">DBJ_FM_FILE_ALREADY_EXISTS</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a58">DBJ_RM_TABLE_ALREADY_EXISTS</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00261">DBJ_SET_ERROR_TOKEN1</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="DbjRecordManager::dropTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::dropTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tableId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Loesche Tabelle. 
<p>
Entferne die angegebene Tabelle und damit das Segment fuer die Tabelle. Saemtliche Daten innerhalb dieser Tabelle sind damit unwiderruflich verloren. Sollte die Tabelle nicht existieren, so wird mit einer Fehlermeldung reagiert. Genauso wird ueberprueft, ob die Tabellen-ID aus Versehen einem Segment entspricht, welches nicht als Tabelle verwendet wird, sondern als Index. In diesem Fall wird auch ein Fehler zurueckgegeben.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der zu loeschenden Tabelle </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00062">62</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00207">DbjBufferManager::dropSegment()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="DbjRecordManager::dumpPageContent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::dumpPageContent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pageId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Darstellung der Seitendaten. 
<p>
Schreibe alle Informationen der angegebenen Seite auf die Standardausgabe STDOUT. Es wird zwischen FSI-Seiten und Datenseiten unterschieden. Fuer FSI-Seiten werden die einzelnen (genutzten) FSI-Eintraege ausgegeben, und fuer Datenseiten die Informationen, an welcher Stelle der Seite welche Records hinterlegt sind.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle zu der die Seite gehoert </td></tr>
    <tr><td></td><td valign=top><em>pageId</em>&nbsp;</td><td>ID der Seite </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_page_content_8cpp-source.html#l00050">50</a> of file <a class="el" href="_dbj_page_content_8cpp-source.html">DbjPageContent.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00397">DbjRecordManager::SlotPageHeader::consecFreeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00399">DbjRecordManager::SlotPageHeader::consecFreeSpaceOffset</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00486">DbjRecordManager::FsiPage::countEntries</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_memory_manager_8hpp-source.html#l00439">DbjMemCopy()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00395">DbjRecordManager::SlotPageHeader::freeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00442">DbjRecordManager::FsiEntry::freeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00445">DbjRecordManager::FsiEntry::freeSpaceBlock</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00023">FSI_BLOCK_SIZE</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00501">getFsiPageId()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00022">MAX_FSI_ENTRIES</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00158">TupleId::page</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00393">DbjRecordManager::SlotPageHeader::pageHeader</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00483">DbjRecordManager::FsiPage::pageHeader</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00068">DbjPage::PageHeader::pageId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00488">DbjRecordManager::FsiPage::pageInfo</a>, <a class="el" href="class_dbj_record_manager.html#y3y2">PlaceHolderTid</a>, <a class="el" href="class_dbj_record_manager.html#y3y0">PrimaryRecord</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00382">DbjRecordManager::Slot::recordType</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="class_dbj_record_manager.html#y3y1">SecondaryRecord</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00160">TupleId::slot</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00042">Uint8</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="DbjRecordManager::dumpTableContent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::dumpTableContent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tableId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Darstellung der Tabellen-Daten. 
<p>
Schreibe alle Informationen der angegebenen Tabelle, einschliesslichen der Informationen in den FSI und Seitendaten, auf die Standardausgabe STDOUT.<p>
Intern werden alle Seiten der Tabelle geholt und anschliessend ueber "dumpPageContent" ausgegebenen. Der Vorgang bricht ab, sobald eine nicht-existierende Seite gefunden wird, da wir davon ausgehen koennen, dass die Seitennummern immer lueckenlos vergeben werden.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_page_content_8cpp-source.html#l00025">25</a> of file <a class="el" href="_dbj_page_content_8cpp-source.html">DbjPageContent.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a70">DBJ_BM_PAGE_NOT_FOUND</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_page_content_8cpp-source.html#l00050">dumpPageContent()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d12" doxytag="DbjRecordManager::findFreeMemoryBlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::findFreeMemoryBlock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__int__datatypes.html#ga9">Uint16</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>numBytes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__id__datatypes.html#ga0">PageId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>freePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Suche nach Freiplatz in Seite. 
<p>
Diese Methode sucht nach der naechsten Seite, die einen freien Speicherbereich der angegebenen Groesse enthaelt. Hierbei wird durch die Seiten des FSI iteriert, und die einzelnen FSI-Eintraege ueberprueft.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle, in der der Freiplatz gesucht wird </td></tr>
    <tr><td></td><td valign=top><em>numBytes</em>&nbsp;</td><td>die Groesse des einzufuegenden Records, angegeben in Byte </td></tr>
    <tr><td></td><td valign=top><em>freePage</em>&nbsp;</td><td>Referenz auf den gefunden Eintrag, so dass dieser nachfolgend gleich aktualisiert werden kann </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00884">884</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00486">DbjRecordManager::FsiPage::countEntries</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a70">DBJ_BM_PAGE_NOT_FOUND</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a51">DBJ_RM_NO_MEMORY_BLOCK_FOUND_WARN</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00445">DbjRecordManager::FsiEntry::freeSpaceBlock</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00023">FSI_BLOCK_SIZE</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00501">getFsiPageId()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00022">MAX_FSI_ENTRIES</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00488">DbjRecordManager::FsiPage::pageInfo</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d14" doxytag="DbjRecordManager::findFreeSpaceInPage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::findFreeSpaceInPage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_dbj_page.html">DbjPage</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>freeSpace</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bestimme Freiplatz in Seite. 
<p>
Diese Methode sucht den gesamten freien Speicher in der Seite und gibt dessen Groesse zurueck. Sind bei einer Seite alle Slots belegt, so ist der Freiplatz gleich 0. Andernfalls wird<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>page</em>&nbsp;</td><td>Seite fuer die der freie Speicher berechnet werden soll </td></tr>
    <tr><td></td><td valign=top><em>freeSpace</em>&nbsp;</td><td>Referenz auf die aufsummierte Groesse des freien Speichers der Seite </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l01193">1193</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00024">MAX_SLOTS</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00042">Uint8</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d11" doxytag="DbjRecordManager::findFsiEntry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::findFsiEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pageToFind</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>pageInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Suche Eintrag im FSI. 
<p>
Sucht den Eintrag fuer die angegebene Seite im Freispeicherverzeichnis und gibt ihn zurueck.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle, in der die gesuchte Seite zu finden ist </td></tr>
    <tr><td></td><td valign=top><em>pageToFind</em>&nbsp;</td><td>ID der Seite, fuer die die FSI-Informationen ermittelt werden </td></tr>
    <tr><td></td><td valign=top><em>pageInfo</em>&nbsp;</td><td>Referenz auf die FSI-Info der Seite </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00832">832</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a70">DBJ_BM_PAGE_NOT_FOUND</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a57">DBJ_RM_FSI_ENTRY_NOT_ALLOWED</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a55">DBJ_RM_FSI_PAGE_DOES_NOT_EXIST</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a56">DBJ_RM_NO_FSI_ENTRY_FOR_PAGE</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00278">DBJ_SET_ERROR_TOKEN3</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00501">getFsiPageId()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00512">getFsiSlot()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00568">pageAlreadyExists()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00488">DbjRecordManager::FsiPage::pageInfo</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d13" doxytag="DbjRecordManager::findLargestFreeSpaceInPage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::findLargestFreeSpaceInPage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_dbj_page.html">DbjPage</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>maxBlockOffset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>maxBlockSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bestimme Ort des groessten freien Blocks in der Seite. 
<p>
Diese Methode sucht den groessten freien Speicherblock der Seite und gibt dessen Speicherort und die Groesse zurueck. Ist die Seite bereits voll, d.h. sind alle Slots belegt, so wird die Groesse 0 fuer den maximalen Block zurueckgegeben, und auch der Offset wird auf 0 gesetzt. Dies dient dazu, anzuzeigen, dass kein Platz mehr in der Seite vorhanden sein kann.<p>
Intern wird ein Array als Kopie der Slot-Tabelle angelegt, und die Eintraege in diesem Array werden nach den Offsets sortiert. Somit kann mit einen einfachen Sweep ueber das sortierte Array jeweils errechnet werden, welche Luecken/Freiraeume es zwischen den einzelnen Eintraegen gibt, und somit die groesste Luecke ermittelt werden.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>page</em>&nbsp;</td><td>Seite fuer die der groesste freie Block gesucht wird </td></tr>
    <tr><td></td><td valign=top><em>maxBlockOffset</em>&nbsp;</td><td>Referenz auf die Stelle des Blockes in der Seite </td></tr>
    <tr><td></td><td valign=top><em>maxBlockSize</em>&nbsp;</td><td>Referenz auf die Groesse des gefundenen Blocks </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l01122">1122</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00024">MAX_SLOTS</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01115">slotCompare()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00042">Uint8</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d16" doxytag="DbjRecordManager::findNextRecord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::findNextRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Funktion, zum Findes des naechsten Records. 
<p>
Diese Funktion sucht nach dem naechsten verfuegbaren Record und wird vom <a class="el" href="class_dbj_record_iterator.html#a0">DbjRecordIterator::getNext</a> und <a class="el" href="class_dbj_record_iterator.html#a1">DbjRecordIterator::hasNext</a> verwendet. Zunaechst sucht diese Funktion auf der aktuellen Seite nach neuen Records, falls dort kein weiterer Record vorhanden ist, wird nach der naechsten Seite gesucht, die nicht leer, aber existent ist. Auf dieser Seite muss dann ein Record zu finden sein.<p>
Alle Eintraege von Stellvertreter-TIDs werden aufgeloest. Das heisst, wenn eine Stellvertreter-TID gefunden wird, so wird diese TID als Ergebnis zurueckgegebenen. Daraus ergibt sich, dass alle sekundaeren (ausgelagerten) Records vom Iterator selbst ignoriert werden.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle die gescannt wird </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td>Referenz auf die Tupel-ID von der aus die naechste Tupel-ID gesucht wird. Die naechste Tupel-ID wird auch in diesem Objekt hinterlegt. </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l01315">1315</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a4">DBJ_NOT_FOUND_WARN</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a55">DBJ_RM_FSI_PAGE_DOES_NOT_EXIST</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a56">DBJ_RM_NO_FSI_ENTRY_FOR_PAGE</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00832">findFsiEntry()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00501">getFsiPageId()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00024">MAX_SLOTS</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00158">TupleId::page</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00382">DbjRecordManager::Slot::recordType</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="print__btree_8cpp-source.html#l00233">DbjLockManager::request()</a>, <a class="el" href="class_dbj_record_manager.html#y3y1">SecondaryRecord</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00160">TupleId::slot</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00042">Uint8</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d19" doxytag="DbjRecordManager::get" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const bool&nbsp;</td>
          <td class="mdname" nowrap> <em>primaryOnly</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="class_dbj_record.html">DbjRecord</a> *&amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>record</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hole Record. 
<p>
Diese Methode holt einen Record aus der angegebenen Tabelle und Tupel-ID. Die Methode implementiert die eigentliche externe Schnittstelle. Jedoch gibt es eine Erweiterung um die Methode are intern im Record Manager zu nutzen wenn ausgelagerte Records geholt werden sollen.<p>
Ist das Flag "primaryOnly" gesetzt, so darf der (externe oder interne) Aufrufer nur primaere oder ausgelagerte Records anfordern. Andernfalls wird ein Fehler zurueckgegeben.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle zu der der Records gehoert </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td>Tuple-ID des Records </td></tr>
    <tr><td></td><td valign=top><em>primaryOnly</em>&nbsp;</td><td>Flag fuer den Zugriff auf sekundaere Records </td></tr>
    <tr><td></td><td valign=top><em>record</em>&nbsp;</td><td>Referenz auf <a class="el" href="class_dbj_record.html">DbjRecord</a> Struktur </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00511">511</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a70">DBJ_BM_PAGE_NOT_FOUND</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a4">DBJ_NOT_FOUND_WARN</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a52">DBJ_RM_GET_RECORD_TOO_LONG</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a54">DBJ_RM_RECORD_OUT_OF_PAGE_BOUNDS</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00278">DBJ_SET_ERROR_TOKEN3</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00304">DBJ_SET_ERROR_TOKEN5</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_memory_manager_8hpp-source.html#l00439">DbjMemCopy()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00251">get()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00246">DbjBufferManager::openSegment()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00158">TupleId::page</a>, <a class="el" href="class_dbj_record_manager.html#y3y2">PlaceHolderTid</a>, <a class="el" href="class_dbj_record_manager.html#y3y0">PrimaryRecord</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00382">DbjRecordManager::Slot::recordType</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="print__btree_8cpp-source.html#l00233">DbjLockManager::request()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_record_8cpp-source.html#l00055">DbjRecord::setData()</a>, <a class="el" href="_dbj_record_8cpp-source.html#l00088">DbjRecord::setTupleId()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00160">TupleId::slot</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="DbjRecordManager::get" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="class_dbj_record.html">DbjRecord</a> *&amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>record</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stellt einen Record zur Verfuegung (Bereitstellen). 
<p>
Stellt den Record mit der angegebenen Tuple-ID zur Verfuegung. Existiert der Record fuer das Tupel nicht, so wird das mit einer Fehlermeldung quittiert. Der Record wird auf der entsprechenden Datenbankseite gesucht und ueber die <a class="el" href="class_dbj_record.html">DbjRecord</a> Struktur zurueckgegeben. Die Datenbankseite wird vom Buffer Manager angefordert und von diesem bereitgestellt. Bezeichnet die angegebene TID einen sekundaeren Record, so wird ein Fehler zurueckgegeben. Steht bei der TID eine Stellvertreter-TID, so wird dieser Verweis verfolgt und der sekundaere Record wird zurueckgegeben.<p>
Das <a class="el" href="class_dbj_record.html">DbjRecord</a> Object besitzt eine Kopie des Records von der Datenbankseite, und die Seite selbst wird gleich wieder freigegeben und kann aus dem Puffer bei Bedarf verdraengt werden (das ist Aufgabe des Buffer Managers).<p>
Um den konkurrierenden Zugriff mehrere Transaktionen zu unterstuetzen, muss der Record Manager dafuer sorgen, dass die Seite auf dem dieses Tupel steht mit einer Lesesperre bzw. Schreibsperre versehen wird. Die Sperren werden ueber den Lock Manager angefordert. Somit ergibt sich folgendes Protokoll fuer die interne Verarbeitung von <a class="el" href="class_dbj_record_manager.html#a5">DbjRecordManager::get</a>:<ol>
<li>fordere Seite an mit <a class="el" href="class_dbj_buffer_manager.html#a3">DbjBufferManager::getPage</a></li><li>sperre Seite mit <a class="el" href="class_dbj_lock_manager.html#a0">DbjLockManager::request</a></li><li>erzeuge <a class="el" href="class_dbj_record.html">DbjRecord</a> Objekt</li><li>kopiere Daten von Seite in <a class="el" href="class_dbj_record.html">DbjRecord</a> Objekt</li><li>gib Seite frei mit <a class="el" href="class_dbj_buffer_manager.html#a5">DbjBufferManager::releasePage</a></li></ol>
<p>
Die <a class="el" href="class_dbj_record.html">DbjRecord</a> Datenstruktur wird vom Record Manager allokiert wenn der angegebene "record" Zeiger ein NULL-Zeiger ist. Andernfalls wird die uebergebene Datenstruktur wiederverwendet und alle vorherigen Daten werden ueberschrieben.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle zu der der Records gehoert </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td>Tuple-ID des Records </td></tr>
    <tr><td></td><td valign=top><em>record</em>&nbsp;</td><td>Referenz auf <a class="el" href="class_dbj_record.html">DbjRecord</a> Struktur </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00251">251</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="DbjRecordManager::getFsiPageId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const <a class="el" href="group__id__datatypes.html#ga0">PageId</a> DbjRecordManager::getFsiPageId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pageId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Berechne FSI-Seitennummer. 
<p>
Fuer die angegebene Seite wird errechnet, welches die zugehoerige FSI-Seite ist. Die Berechnung basiert darauf, dass jede FSI-Seite die Inforationen fuer alle nachfolgenden Seiten vermerkt (ohne Luecken), bis zur naechsten FSI-Seite. Die Anzahl der jeweils nachfolgenden Seiten ist in der Variable <code>MAX_FSI_ENTRIES</code> hinterlegt.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>pageId</em>&nbsp;</td><td>ID der Datenseite, fuer die die FSI-Seite berechnet wird </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00501">501</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8cpp-source.html#l00022">MAX_FSI_ENTRIES</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="DbjRecordManager::getFsiSlot" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const <a class="el" href="group__int__datatypes.html#ga15">Uint32</a> DbjRecordManager::getFsiSlot           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pageId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Berechne <a class="el" href="struct_dbj_record_manager_1_1_slot.html">Slot</a> fuer die Seite im FSI. 
<p>
Diese Methode berechnet den <a class="el" href="struct_dbj_record_manager_1_1_slot.html">Slot</a> des zu der angegebenen Seite gehoerenden Eintrags in der FSI-Seite.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>pageId</em>&nbsp;</td><td>ID der Seite fuer die der <a class="el" href="struct_dbj_record_manager_1_1_slot.html">Slot</a> in der FSI-Seite berechnet wird </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00512">512</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00501">getFsiPageId()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>.    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="DbjRecordManager::getInstance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_dbj_record_manager.html">DbjRecordManager</a>* DbjRecordManager::getInstance           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gib Instanz fuer den Record Manager. 
<p>
Diese Methode liefert die eine Instanz des Record Managers.<p>
Der Record Manager existiert genau einmal im aktuellen Prozess, der die SQL Anweisung abarbeitet. Um zu vermeiden, dass mehrere potentiell konkurrierende Instanzen existieren, wird das Singleton Design Pattern eingesetzt. Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00098">98</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8cpp-source.html#l00028">DbjRecordManager()</a>, and <a class="el" href="_dbj_record_manager_8cpp-source.html#l00021">instance</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d15" doxytag="DbjRecordManager::getNewPageId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::getNewPageId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__id__datatypes.html#ga0">PageId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>pageId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Erstellt neue PageId. 
<p>
Diese Methode erzeugt neue PageId um eine Seite anlegen zu koennen.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>table fr den eine unbenutzte pageid gesucht wird </td></tr>
    <tr><td></td><td valign=top><em>pageId</em>&nbsp;</td><td>Die neu erzeugte PageId welche zurueckgegeben wird </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l01247">1247</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00486">DbjRecordManager::FsiPage::countEntries</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a70">DBJ_BM_PAGE_NOT_FOUND</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a60">DBJ_RM_NO_MORE_PAGES</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00261">DBJ_SET_ERROR_TOKEN1</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00022">MAX_FSI_ENTRIES</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="DbjRecordManager::getRecordIterator" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::getRecordIterator           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="class_dbj_record_iterator.html">DbjRecordIterator</a> *&amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>iter</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gib Iterator fuer Table-Scan. 
<p>
Diese Methode gibt einen Iterator ueber alle Records der angegebenen Tabelle zurueck. Uebergibt der Aufrufer einen NULL-Zeiger, so wird ein neues Iterator-Objekt vom Record Manager erzeugt. Andernfalls wird der uebergebene Iterator-Objekt wieder verwendet.<p>
Intern iteriert der Record Manager ueber alle Seiten des Segments, dass zu der Tabelle gehoert, und gibt ueber den Iterator nacheinander alle Records auf diesen Seiten zurueck. Dabei wird natuerlich keine bestimmte Ordnung der Records eingehalten, ausser der Ordnung wie sie zufaellig auf den Seiten stehen.<p>
Die Funktion legt zunaechst einen neuen Iterator an und versucht mittels <a class="el" href="class_dbj_record_manager.html#d16">DbjRecordManager::findNextRecord</a> den ersten Record zu finden und die Daten dessen zu setzen (<a class="el" href="struct_tuple_id.html">TupleId</a>). Falls kein Record gefunden wird, ist das Segment leer und/oder nicht vorhanden. In diesem Fall wird ein NULL-Zeiger und die Warnung <code>DBJ_NOT_FOUND_WARN</code> zurueckgegeben.<p>
Es wird das Freispeicherverzeichnis des Segments mit herangezogen, um leere Seiten zu ignorieren.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle, die gescannt wird </td></tr>
    <tr><td></td><td valign=top><em>iter</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00630">630</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00246">DbjBufferManager::openSegment()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d20" doxytag="DbjRecordManager::getRecordOffsetOnPage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::getRecordOffsetOnPage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>record</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="struct_tuple_id.html">TupleId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="class_dbj_page.html">DbjPage</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="struct_dbj_record_manager_1_1_slot.html">Slot</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>slot</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>newTupleId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Finde Lokation fuer wachsenden Record. 
<p>
Finde die Stelle auf der angegebenen Datenseite wohin der Record gespeichert werden soll. Die Informationen ueber den Offset zum Speichern wird gleich in den <a class="el" href="struct_dbj_record_manager_1_1_slot.html">Slot</a> fuer den Record hinterlegt. Sollte auf der Seite nicht genuegend Platz sein um den Record abzuspeichern, so wird er auf eine andere Seite ausgelagert und eine neue Tupel-ID zurueckgegeben. Der Aufrufer kann dann die Tupel-ID an dem ermittelten Offset hinterlegen.<p>
Intern werden einige Sonderfaelle beachtet:<ol>
<li>passt die Stellvertreter-TID nicht mehr auf die Seite da der urspruengliche Record kuerzer als eine TID war und kein Freiplatz mehr vorhanden ist, so wird ein anderer Record ausgelagert<br>
 <em>Das kann Kettenbildung bei den Stellvertreter-TIDs verursachen!!</em></li><li>ist noch genuegend Platz im groessten freien Block, so wird der aktualisierte Record dorthin kopiert</li><li>ist insgesamt noch genuegend Platz auf der Seite, so werden die Daten auf der Seite reorganisiert, d.h. zusammengeschoben, um einen zusammenhaengenden freien Platz zu erhalten und den neuen Record dorthin zu schreiben.</li><li>passt der Record nicht mehr auf die aktuelle Seite, so wird er schlussendlich auf eine andere Seite ausgelagert.<br>
 Ist dies bereits ein sekundaerer Record gewesen, so wird er auf der aktuellen Seite geloescht, und der Aufrufer erhaelt ueber "newTupleId" die Tupel-ID des Records auf der neuen Seite.</li></ol>
<p>
Bei den Operationen wird die Information ueber den Freiplatz der Seite nicht modifiziert. Insbesondere wird das FSI nicht aktualisiert.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>record</em>&nbsp;</td><td>neue Daten fuer den zu aktualisierenden Record </td></tr>
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle zu der der Record gehoert </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td>Tupel-ID des zu aktualisierenden Records </td></tr>
    <tr><td></td><td valign=top><em>page</em>&nbsp;</td><td>Zeiger auf die bereits geoeffnete Datenseite </td></tr>
    <tr><td></td><td valign=top><em>slot</em>&nbsp;</td><td>Zeiter auf den <a class="el" href="struct_dbj_record_manager_1_1_slot.html">Slot</a> fuer den Record </td></tr>
    <tr><td></td><td valign=top><em>newTupleId</em>&nbsp;</td><td>Referenz auf die Stellvertreter-TID des Records, wenn er wirklich auf eine andere Seite ausgelagert werden musste (sonst gleich "tupleId") </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l01420">1420</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00397">DbjRecordManager::SlotPageHeader::consecFreeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00399">DbjRecordManager::SlotPageHeader::consecFreeSpaceOffset</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00395">DbjRecordManager::SlotPageHeader::freeSpace</a>, <a class="el" href="_dbj_record_8hpp-source.html#l00060">DbjRecord::getLength()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00159">insert()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01039">reorganizePage()</a>, <a class="el" href="class_dbj_record_manager.html#y3y1">SecondaryRecord</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d17" doxytag="DbjRecordManager::insert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::insert           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>record</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="class_dbj_record_manager.html#y3">RecordType</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Fuege Record ein. 
<p>
Diese Methode fuegt den angegebenen Record in die Tabelle ein und setzt fuer ihn den spezifizierten Record-Typ.<p>
Diese Methode wird intern verwendet, wenn Records auf Grund von Aktualisierungen wachsen und nicht mehr in die aktuelle Seite hineinpassen. Sie werden nun ausgelagert, und der ausgelagerte Record hat einen anderen Typ als der originale Record.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>record</em>&nbsp;</td><td>Einzufuegender Record </td></tr>
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle in das der Record einzufuegen ist </td></tr>
    <tr><td></td><td valign=top><em>type</em>&nbsp;</td><td>Typ des Records (PrimaryRecord oder SecondaryRecord) </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td>Referenz auf die <a class="el" href="struct_tuple_id.html">TupleId</a> des eingefuegten Records </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00082">82</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8cpp-source.html#l00704">addFsiEntry()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00397">DbjRecordManager::SlotPageHeader::consecFreeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00399">DbjRecordManager::SlotPageHeader::consecFreeSpaceOffset</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a53">DBJ_RM_INSERT_RECORD_TOO_LONG</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a51">DBJ_RM_NO_MEMORY_BLOCK_FOUND_WARN</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_memory_manager_8hpp-source.html#l00439">DbjMemCopy()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00884">findFreeMemoryBlock()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01122">findLargestFreeSpaceInPage()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00395">DbjRecordManager::SlotPageHeader::freeSpace</a>, <a class="el" href="_dbj_record_8hpp-source.html#l00060">DbjRecord::getLength()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00415">DbjBufferManager::getNewPage()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01247">getNewPageId()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_8hpp-source.html#l00071">DbjRecord::getRecordData()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>, <a class="el" href="_dbj_page_8cpp-source.html#l00016">DbjPage::markAsModified()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00545">markEmptyPage()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00024">MAX_SLOTS</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00246">DbjBufferManager::openSegment()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00158">TupleId::page</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="class_dbj_record_manager.html#y3y0">PrimaryRecord</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00382">DbjRecordManager::Slot::recordType</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="print__btree_8cpp-source.html#l00233">DbjLockManager::request()</a>, <a class="el" href="class_dbj_record_manager.html#y3y1">SecondaryRecord</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00160">TupleId::slot</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>, and <a class="el" href="_dbj_record_manager_8cpp-source.html#l00968">updateFreeSpace()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="DbjRecordManager::insert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::insert           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>record</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Fuege neuen Record ein. 
<p>
Fuege einen neuen Record in die angegebene Tabelle ein. Der Record Manager loest die TableId auf und bestimmt das zugehoerige Segment. Anschliessend wird im Freispeicherverzeichnis des Segments nach einer geeigneten Seite gesucht, diese Seite angefordert und der Record dort eingefuegt. Sollte keine geeignete Seite zur Verfuegung stehen, so muss eine neue, leere Seite vom Buffer Manager angefordert werden. Die Seite muss fuer diesen Vorgang ueber den Lock Manager zum Schreiben gesperrt werden.<p>
Als Ergebnis dieser Operation wird die Tuple-ID des Records (bestehend aus Seiten-ID und Slotnummer auf der Seite) zurueckgegeben. Diese Tupel-ID kann anschliessend dazu verwendet werden, etwaige Index-Eintraege fuer dieses Tupel ueber den Index Manager vornehmen zu lassen.<p>
Existiert die Tabelle nicht oder ist aus irgendeinem anderen Grund das Erstellen des Records nicht moeglich, wird ein entsprechender Fehler zurueckgegeben. Die Tabelle (Segment) muss nicht geoeffnet sein, dies erfolgt falls noetig automatisch.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>record</em>&nbsp;</td><td>Einzufuegender Record </td></tr>
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle in das der Record einzufuegen ist </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td>Referenz auf die <a class="el" href="struct_tuple_id.html">TupleId</a> des eingefuegten Records </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00159">159</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="class_dbj_record_manager.html#y3y0">PrimaryRecord</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="DbjRecordManager::markEmptyPage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DbjRecordManager::markEmptyPage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fsiEntry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Markiere FSI-Eintrag fuer leere Seite. 
<p>
Markiere den angegebenen FSI-Eintrag fuer eine leere Seite. Hierbei wird die "freeSpace"-Information und die "freeSpaceBlock"-Information auf das Maximum gesetzt.<p>
Diese Methode wird nur beim Initialisieren einer neuen Datenseite benutzt.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>fsiEntry</em>&nbsp;</td><td>zu initialisierender FSI-Eintrag </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00545">545</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00442">DbjRecordManager::FsiEntry::freeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00445">DbjRecordManager::FsiEntry::freeSpaceBlock</a>, and <a class="el" href="_dbj_record_manager_8cpp-source.html#l00023">FSI_BLOCK_SIZE</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="DbjRecordManager::markNotExists" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DbjRecordManager::markNotExists           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fsiEntry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Markiere FSI-Eintrag fuer nicht-existierende Seite. 
<p>
Markiere den angegebenen FSI-Eintrag fuer eine nicht-existierende Seite. Hierbei wird die "freeSpace"-Information der Seite auf 0, und die "freeSpaceBlock"-Information auf das Maximum gesetzt, um die Seite als noch-nicht-erzeugt zu markieren.<p>
Diese Methode wird nur beim Initialisieren einer neuen FSI-Seite benutzt fuer alle Eintraege, die diese FSI-Seite verwalten wird.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>fsiEntry</em>&nbsp;</td><td>zu initialisierender FSI-Eintrag </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00527">527</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00442">DbjRecordManager::FsiEntry::freeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00445">DbjRecordManager::FsiEntry::freeSpaceBlock</a>, and <a class="el" href="_dbj_record_manager_8cpp-source.html#l00023">FSI_BLOCK_SIZE</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d6" doxytag="DbjRecordManager::pageAlreadyExists" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool DbjRecordManager::pageAlreadyExists           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fsiEntry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bestimme, ob Seite bereits existiert. 
<p>
Diese Methode ermittelt, ob die Seite zu der der angegebene FSI-Eintrag gehoert, bereits zuvor angefordert wurde und die entsprechenden FSI-Informationen mittels "addFsiEntry" hinzugefuegt wurden. Ist dies der Fall, so wird "true" zurueckgegeben; andernfalls ist das Ergebnis "false".<p>
Intern werden bisher noch nicht angeforderte Seiten so markiert, dass im FSI-Eintrag der groesste zusammenhaenge Block groesser ist als der eigentliche Freiplatz auf der Seite. Diese Bedingung wird einfach geprueft.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>fsiEntry</em>&nbsp;</td><td>FSI-Eintrag fuer die gesuchte Seite </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00568">568</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00442">DbjRecordManager::FsiEntry::freeSpace</a>, and <a class="el" href="_dbj_record_manager_8hpp-source.html#l00445">DbjRecordManager::FsiEntry::freeSpaceBlock</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="DbjRecordManager::remove" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::remove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Loeschen eines Records. 
<p>
Loesche den identifierten Record aus der angegebenen Tabelle. Der Record Manager findet die Seite, auf der dieser Record gespeichert wird und sperrt die Seite im Schreibmodus ueber den Lock Manager. Anschliessend wird die Seite so modifiziert, dass der Record ausgetragen wird und damit nicht mehr vorhanden ist.<p>
Wurde der Record zuvor ausgelagert da er nach einem "replace" nicht mehr auf die urspruengliche Seite passte, so wird sowohl der sekundaere Record als auch die Stellvertreter-TID entfernt.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle zu der der Records gehoert </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td><a class="el" href="struct_tuple_id.html">TupleId</a> des zu loeschenden Records </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00277">277</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a4">DBJ_NOT_FOUND_WARN</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_memory_manager_8hpp-source.html#l00439">DbjMemCopy()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>, <a class="el" href="_dbj_page_8cpp-source.html#l00016">DbjPage::markAsModified()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00158">TupleId::page</a>, <a class="el" href="class_dbj_record_manager.html#y3y2">PlaceHolderTid</a>, <a class="el" href="class_dbj_record_manager.html#y3y0">PrimaryRecord</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00382">DbjRecordManager::Slot::recordType</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="print__btree_8cpp-source.html#l00233">DbjLockManager::request()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00160">TupleId::slot</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00042">Uint8</a>, and <a class="el" href="_dbj_record_manager_8cpp-source.html#l00968">updateFreeSpace()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d9" doxytag="DbjRecordManager::reorganizePage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::reorganizePage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_dbj_page.html">DbjPage</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>freeSpace</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__int__datatypes.html#ga9">Uint16</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>freeSpaceOffset</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reorganisiere Seite. 
<p>
Reorganisiere die angegebene Seite, um freien Speicherplatz wieder zusammenzufassen und fuer weitere Records nutzen zu koennen.<p>
Intern werden alle Records zusammengeschoben. Die Slottabelle wird dabei (bis auf die Offsets) nicht geaendert. Die Freiplatzinformationen auf der Seite werden ebenfalls nicht modifiziert. Allerdings wird die neue Freiplatz-Information berechnet und ueber die Referenzparameter zurueckgegeben.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>page</em>&nbsp;</td><td>zu reorganisierende Seite </td></tr>
    <tr><td></td><td valign=top><em>freeSpace</em>&nbsp;</td><td>Referenz auf die Groesse des freien Speicherplatzes auf der Seite (nach Reorg) </td></tr>
    <tr><td></td><td valign=top><em>freeSpaceOffset</em>&nbsp;</td><td>Referenz auf den Offset wo der freie Speicher der Seite anfaengt (nach Reorg) </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l01039">1039</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00024">MAX_SLOTS</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01027">SlotInfo::offset</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01025">SlotInfo::slotIndex</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01030">slotInfoCompare()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00042">Uint8</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d18" doxytag="DbjRecordManager::replace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::replace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>record</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>newTid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ersetze Record. 
<p>
Diese Methode ersetzt den angegebenen Record in der angegeben Tabelle und gibt zusaetzlich die neue Tupel-ID fuer den Record zurueck. Die Tupel-ID aendert sich nur in dem Fall wenn der Record ausgelagert werden muss.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle, zu der das Tupel gehoert </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td><a class="el" href="struct_tuple_id.html">TupleId</a> des zu ersetzenden Records </td></tr>
    <tr><td></td><td valign=top><em>record</em>&nbsp;</td><td>neuer Record, der den urspruenglichen ersetzt </td></tr>
    <tr><td></td><td valign=top><em>newTid</em>&nbsp;</td><td><a class="el" href="struct_tuple_id.html">TupleId</a> des real abgespeicherten Records (gleich "tupleId" wenn Record nicht ausgelagert wird) </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00357">357</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00816">DbjBufferManager::convertTableIdToSegmentId()</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a4">DBJ_NOT_FOUND_WARN</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a53">DBJ_RM_INSERT_RECORD_TOO_LONG</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_memory_manager_8hpp-source.html#l00439">DbjMemCopy()</a>, <a class="el" href="_dbj_record_8hpp-source.html#l00060">DbjRecord::getLength()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_record_8hpp-source.html#l00071">DbjRecord::getRecordData()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01420">getRecordOffsetOnPage()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>, <a class="el" href="_dbj_page_8cpp-source.html#l00016">DbjPage::markAsModified()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00401">DbjRecordManager::SlotPageHeader::numberOfSlots</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00378">DbjRecordManager::Slot::offset</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00158">TupleId::page</a>, <a class="el" href="class_dbj_record_manager.html#y3y2">PlaceHolderTid</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00380">DbjRecordManager::Slot::recordLength</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00403">DbjRecordManager::SlotPageHeader::recordSlot</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00382">DbjRecordManager::Slot::recordType</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00277">remove()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00206">replace()</a>, <a class="el" href="print__btree_8cpp-source.html#l00233">DbjLockManager::request()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00160">TupleId::slot</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>, and <a class="el" href="_dbj_record_manager_8cpp-source.html#l00968">updateFreeSpace()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="DbjRecordManager::replace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::replace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga1">TableId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="struct_tuple_id.html">TupleId</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tupleId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="class_dbj_record.html">DbjRecord</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>record</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ersetzen eines Records. 
<p>
Der angegebene Record wird, unter Beibehaltung seiner <a class="el" href="struct_tuple_id.html">TupleId</a>, gegen den neuen Record ersetzt. Dabei darf der neue Record durchaus laenger sein als der urspruengliche Record, mit der Einschraenkung, dass der neue Record nicht laenger sein darf als eine Datenbankseite.<p>
Waechst der Record so sehr, dass er nicht mehr in die aktuelle Seite passt (weil z.B. andere Records auf der Seite hinterlegt sind), so wird anstatt des Records eine "Stellvertreter-Tupel-ID" in der Seite hinterlegt, und der Record in eine Seite im Segment gespeichert. Dieser Record wird als "sekundaerer Record" bezeichnet. Die Stellvertreter-TID beinhaltet die Information, wo der Record wirklich zu finden ist.<p>
Im Zusammenhang mit wachsenden Records gibt es einen weiteren Sonderfall, naemlich wenn ein bereits ausgelagerter Record nochmals waechst und in die Zielseite nicht hineinpasst. In diesem Fall wird der Record auf eine neue Seite geschrieben und der vorherige sekundaere Record geloescht. Die Stellvertreter-TID an der Stelle des originalen Records wird entsprechend aktualisiert.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tableId</em>&nbsp;</td><td>ID der Tabelle zu der der Records gehoert </td></tr>
    <tr><td></td><td valign=top><em>tupleId</em>&nbsp;</td><td><a class="el" href="struct_tuple_id.html">TupleId</a> des zu ersetzenden Records </td></tr>
    <tr><td></td><td valign=top><em>record</em>&nbsp;</td><td>neuer Record, der den urspruenglichen ersetzt </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00206">206</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00116">TableId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="DbjRecordManager::rollback" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::rollback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Verwerfe alle Modifikationen. 
<p>
Alle Aenderungen, die in der aktuellen Transaktion vorgenommen wurden, werden verworfen. Hierfuer wird der Buffer Manager mittels <a class="el" href="class_dbj_buffer_manager.html#a8">DbjBufferManager::discard</a> aufgerufen, und dieser sorgt dafuer, dass alle Aenderungen im Puffer entfernt werden. Zusaetzlich werden alle Sperren ueber den Lock Manager freigegeben.<p>
Diese Methode wird beispielsweise bei einem ROLLBACK aufgerufen, was in unserem Fall dem Fehlschlagen einer SQL-Anweisung gleich kommt. Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00681">681</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00750">DbjBufferManager::discard()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">lockMgr</a>, and <a class="el" href="print__btree_8cpp-source.html#l00244">DbjLockManager::releaseAll()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d8" doxytag="DbjRecordManager::updateFreeSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::updateFreeSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_dbj_page.html">DbjPage</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>page</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Aktualisiere Freiplatzinformationen. 
<p>
Aktualisiere die Freispeicherinformationen der angegeben Seite. Bei Bedarf wird auch die Information im FSI angepasst. Es wird davon ausgegangen, dass alle notwendigen Aenderungen an der Slottabelle bereits vorgenommen wurden, aber die "consecFreeSpace"- und "freeSpace"-Informationen auf der Seite selbst sind noch nicht geaendert.<p>
Die uebergebene Seite muss bereits geoeffnet und mit einer X-Sperre gesperrt sein.<p>
Intern wird der urpsruengliche Freiplatz vermerkt, dann der neue Freiplatz errechnet. Hat sich zwischen der urspruenglichen und der neuen Angabe eine Aenderung ergeben, die sich auf das FSI auswirkt, so wird anschliessend noch die Aktualisierung des FSI angestossen.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>page</em>&nbsp;</td><td>Seite, fuer die die Freiplatzinformationen aktualisiert werden </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00968">968</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00397">DbjRecordManager::SlotPageHeader::consecFreeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00399">DbjRecordManager::SlotPageHeader::consecFreeSpaceOffset</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a3">DBJ_PARAMETER_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01193">findFreeSpaceInPage()</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l01122">findLargestFreeSpaceInPage()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00442">DbjRecordManager::FsiEntry::freeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00395">DbjRecordManager::SlotPageHeader::freeSpace</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00445">DbjRecordManager::FsiEntry::freeSpaceBlock</a>, <a class="el" href="_dbj_record_manager_8cpp-source.html#l00023">FSI_BLOCK_SIZE</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00089">DbjPage::getPageId()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00080">DbjPage::getSegmentId()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00042">Uint8</a>, and <a class="el" href="_dbj_record_manager_8cpp-source.html#l00784">updateFsiEntry()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d10" doxytag="DbjRecordManager::updateFsiEntry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjRecordManager::updateFsiEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="group__tableid.html#ga0">SegmentId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>segmentId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="group__id__datatypes.html#ga0">PageId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pageToEdit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="struct_dbj_record_manager_1_1_fsi_entry.html">FsiEntry</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>newPageInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Aendert Eintrag im FSI. 
<p>
Aendert einen Eintrag im Freispeicherverzeichnis. Es wird der Eintrag fuer die angegebene Seite im Freispeicherverzeichnis der Tabelle/des Segments gesucht, und die neuen Informationen werden fuer die Seite vermerkt.<p>
Als Daten sind in der FsiEntry-Struktur die Anzahl freier Bloecke (1 Block = FSI_BLOCK_SIZE Bytes) bzw. die Anzahl des groessten zusammenhaengenden Bloecke angegeben.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>segmentId</em>&nbsp;</td><td>Segment der Tabelle, zu der die zu aendernde Seite gehoert </td></tr>
    <tr><td></td><td valign=top><em>pageToEdit</em>&nbsp;</td><td>Seitennummer des zu aendernden Seiteneintrags </td></tr>
    <tr><td></td><td valign=top><em>newPageInfo</em>&nbsp;</td><td>neue FSI-Informationen fr die entsprechende Seite </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00784">784</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.
<p>
References <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">bufferMgr</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a2">DBJ_INTERNAL_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a57">DBJ_RM_FSI_ENTRY_NOT_ALLOWED</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00256">DBJ_SET_ERROR</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00501">getFsiPageId()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00512">getFsiSlot()</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00264">DbjBufferManager::getPage()</a>, <a class="el" href="_dbj_page_8hpp-source.html#l00111">DbjPage::getPageData()</a>, <a class="el" href="_dbj_page_8cpp-source.html#l00016">DbjPage::markAsModified()</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00568">pageAlreadyExists()</a>, <a class="el" href="_dbj_types_8hpp-source.html#l00091">PageId</a>, <a class="el" href="_dbj_record_manager_8hpp-source.html#l00488">DbjRecordManager::FsiPage::pageInfo</a>, <a class="el" href="_dbj_buffer_manager_8cpp-source.html#l00547">DbjBufferManager::releasePage()</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00113">SegmentId</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="DbjRecordManager::bufferMgr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_dbj_buffer_manager.html">DbjBufferManager</a>* <a class="el" href="class_dbj_record_manager.html#r0">DbjRecordManager::bufferMgr</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Zeiger auf die Instanz des Buffer Managers. 
<p>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00344">344</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v2" doxytag="DbjRecordManager::FSI_BLOCK_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const <a class="el" href="group__int__datatypes.html#ga9">Uint16</a> <a class="el" href="class_dbj_record_manager.html#v2">DbjRecordManager::FSI_BLOCK_SIZE</a><code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> (
            ((DBJ_PAGE_SIZE - <span class="keyword">sizeof</span>(SlotPageHeader) + <span class="keyword">sizeof</span>(Slot)) %
                    DBJ_MAX_UINT8) == 0 ?
            ((DBJ_PAGE_SIZE - <span class="keyword">sizeof</span>(SlotPageHeader) + <span class="keyword">sizeof</span>(Slot)) /
                    DBJ_MAX_UINT8) :
            ((DBJ_PAGE_SIZE - <span class="keyword">sizeof</span>(SlotPageHeader) + <span class="keyword">sizeof</span>(Slot)) /
                    DBJ_MAX_UINT8) + 1)
</div></pre>Blockgroesse im FSI. 
<p>
Diese Konstante gibt an, wieviele Bytes in einem Block im FSI zusammengefasst werden. Die Groesse eines Blocks ergibt sich aus dem auf einer Seite zur Verfuegung stehenden Speicher fuer Records und der maximalen Anzahl der Bloecke. Da die Anzahl der Bloecke mittels des Datentype <code>Uint8</code> verwaltet wird, haben wir maximal 255 Bloecke pro Seite. Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00023">23</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v0" doxytag="DbjRecordManager::instance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_dbj_record_manager.html">DbjRecordManager</a> * <a class="el" href="class_dbj_record_manager.html#v0">DbjRecordManager::instance</a><code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Zeiger auf die eine Instanz des Record Managers. 
<p>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00021">21</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="DbjRecordManager::lockMgr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_dbj_lock_manager.html">DbjLockManager</a>* <a class="el" href="class_dbj_record_manager.html#r1">DbjRecordManager::lockMgr</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Zeiger auf die Instanz des Lock Managers. 
<p>
Definition at line <a class="el" href="_dbj_record_manager_8hpp-source.html#l00346">346</a> of file <a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v3" doxytag="DbjRecordManager::MAX_FSI_ENTRIES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const <a class="el" href="group__int__datatypes.html#ga15">Uint32</a> <a class="el" href="class_dbj_record_manager.html#v3">DbjRecordManager::MAX_FSI_ENTRIES</a><code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> (DBJ_PAGE_SIZE - <span class="keyword">sizeof</span>(<a class="code" href="group__int__datatypes.html#ga9">Uint16</a>) -
            <span class="keyword">sizeof</span>(<a class="code" href="struct_dbj_page_1_1_page_header.html">DbjPage::PageHeader</a>)) / <span class="keyword">sizeof</span>(FsiEntry)
</div></pre>Maximale Anzahl von Eintraegen, die in einer FSI-Seite moeglich sind. 
<p>
Berechnung wie folgt: nimm Gesamtseitengroesse, ziehe Groesse Uint16 ab (fuer countEntries) und subtrahiere Groesse des globalen Seitenheaders (<a class="el" href="struct_dbj_page_1_1_page_header.html">DbjPage::PageHeader</a>). Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00022">22</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v1" doxytag="DbjRecordManager::MAX_SLOTS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const <a class="el" href="group__int__datatypes.html#ga3">Uint8</a> <a class="el" href="class_dbj_record_manager.html#v1">DbjRecordManager::MAX_SLOTS</a> = <a class="el" href="group__int__datatypes.html#ga5">DBJ_MAX_UINT8</a><code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Maximale Anzahl der Slots auf einer Seite. 
<p>
Definition at line <a class="el" href="_dbj_record_manager_8cpp-source.html#l00024">24</a> of file <a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_dbj_record_manager_8hpp-source.html">DbjRecordManager.hpp</a><li><a class="el" href="_dbj_page_content_8cpp-source.html">DbjPageContent.cpp</a><li><a class="el" href="_dbj_record_manager_8cpp-source.html">DbjRecordManager.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jul 4 15:40:34 2005 for Jenas Datenbanksystem 'System J' by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
