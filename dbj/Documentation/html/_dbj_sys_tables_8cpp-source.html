<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Jenas Datenbanksystem &apos;System J&apos;: DbjSysTables.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>DbjSysTables.cpp</h1><a href="_dbj_sys_tables_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="preprocessor"># include "<a class="code" href="_dbj_sys_tables_8hpp.html">DbjSysTables.hpp</a>"</span>
00002 
<a name="l00003"></a><a class="code" href="class_dbj_sys_tables.html#a2">00003</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a2">DbjSysTables::getTableID</a>(<a class="code" href="group__id__datatypes.html#ga4">TableId</a> &amp;tableId)<span class="keyword"> const</span>{
00004         tableId = 0;
00005     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00006     };
00007 
00008 
<a name="l00009"></a><a class="code" href="_dbj_sys_tables_8cpp.html#a0">00009</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="_dbj_sys_tables_8cpp.html#a0">getTableName</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> *&amp;tableName)<span class="keyword"> const</span>{
00010         tableName = <span class="stringliteral">"SysTables"</span>
00011     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00012     };
00013    
00014  
<a name="l00015"></a><a class="code" href="_dbj_sys_tables_8cpp.html#a1">00015</a>     <a class="code" href="group__int__datatypes.html#ga3">Uint16</a> <a class="code" href="_dbj_sys_tables_8cpp.html#a1">getNumColumns</a>()<span class="keyword"> const</span>{
00016     <span class="keywordflow">return</span> 6;
00017     };
00018 
00019   
<a name="l00020"></a><a class="code" href="class_dbj_sys_tables.html#a5">00020</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a5">DbjSysTables::getColumnName</a>(<a class="code" href="group__int__datatypes.html#ga3">Uint16</a> <span class="keyword">const</span> columnNumber,
00021             <span class="keywordtype">char</span> <span class="keyword">const</span> *&amp;columnName)<span class="keyword"> const</span>{
00022             
00023             <span class="keyword">const</span> <span class="keywordtype">char</span>* name[5];
00024             name[0]=<span class="stringliteral">"TABLENAME"</span>;
00025             name[1]=<span class="stringliteral">"TABLEID"</span>;
00026             name[2]=<span class="stringliteral">"COLUMNCOUNT"</span>;
00027             name[3]=<span class="stringliteral">"PRIMARYKEYINDEX"</span>;
00028             name[4]=<span class="stringliteral">"CREATETIME"</span>;
00029             name[5]=<span class="stringliteral">"TUPLECOUNT"</span>;
00030             
00031            
00032             
00033             <span class="keywordflow">if</span> (columnNumber&lt;0 || columnNumber&gt;5){
00034             <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(<a class="code" href="_dbj_error_codes_8hpp.html#a70a28">DBJ_CAT_OUT_OF_RANGE</a>);
00035             <span class="keywordflow">goto</span> cleanup;
00036             }
00037             <span class="keywordflow">else</span>{
00038                 columnName=name[columnNumber];
00039                 <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00040                 };
00041                 
00042         cleanup:
00043         <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00044             };
00045 
00046     
<a name="l00047"></a><a class="code" href="class_dbj_sys_tables.html#a6">00047</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a6">DbjSysTables::getColumnNumber</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> * <span class="keyword">const</span> columnName,
00048             <a class="code" href="group__int__datatypes.html#ga3">Uint16</a> &amp;columnNumber)<span class="keyword"> const</span>{
00049             
00050                     
00051             <span class="keywordflow">if</span> (DbjStrinCompare(columnName, <span class="stringliteral">"TABLENAME"</span>,0) == DBJ_SAME_STRING){
00052                 columnNumber = 0;
00053             };
00054         
00055             <span class="keywordflow">if</span> (<a class="code" href="group__string__def.html#ga0">DbjStringCompare</a>(columnName, <span class="stringliteral">"TABLEID"</span>,0) == DBJ_SAME_STRING){
00056                 columnNumber = 1;
00057                 <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00058             };
00059 
00060             <span class="keywordflow">if</span> (<a class="code" href="group__string__def.html#ga0">DbjStringCompare</a>(columnName, <span class="stringliteral">"COLUMNCOUNT"</span>,0) == DBJ_SAME_STRING){
00061                 columnNumber = 2;
00062                 <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00063             };
00064             <span class="keywordflow">if</span> (<a class="code" href="group__string__def.html#ga0">DbjStringCompare</a>(columnName, <span class="stringliteral">"PRIMARYKEYINDEX"</span>,0) == DBJ_SAME_STRING){
00065                 columnNumber = 3;
00066                 <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00067             };
00068             <span class="keywordflow">if</span> (<a class="code" href="group__string__def.html#ga0">DbjStringCompare</a>(columnName, <span class="stringliteral">"CREATETIME"</span>,0) == DBJ_SAME_STRING){
00069                 columnNumber = 4;
00070                 <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00071             };
00072             <span class="keywordflow">if</span> (<a class="code" href="group__string__def.html#ga0">DbjStringCompare</a>(columnName, <span class="stringliteral">"TUPLECOUNT"</span>,0) == DBJ_SAME_STRING){
00073                 columnNumber = 5;
00074                 <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00075             };
00076             <span class="keywordflow">else</span> {
00077                 <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(<a class="code" href="_dbj_error_codes_8hpp.html#a70a29">DBJ_CAT_NOT_IN_TABLE</a>);
00078                     <span class="keywordflow">goto</span> cleanup;
00079             };
00080             cleanup:
00081             <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00082             
00083     };
00084     
00085            
00086  
00087         
00088   
<a name="l00089"></a><a class="code" href="class_dbj_sys_tables.html#a7">00089</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a7">DbjSysTables::getColumnDatatype</a>(<a class="code" href="group__int__datatypes.html#ga3">Uint16</a> <span class="keyword">const</span> columnNumber,
00090             DbjDataType &amp;dataType)<span class="keyword"> const</span>{
00091             
00092             <a class="code" href="group__datatypes.html#ga0">DbjDataType</a> type[5];
00093             
00094             type[0] = <a class="code" href="group__datatypes.html#gga0a12">VARCHAR</a>;
00095             type[1] = <a class="code" href="group__datatypes.html#gga0a13">INTEGER</a>;
00096             type[2] = <a class="code" href="group__datatypes.html#gga0a13">INTEGER</a>;
00097             type[3] = <a class="code" href="group__datatypes.html#gga0a12">VARCHAR</a>;
00098             type[4] = <a class="code" href="group__datatypes.html#gga0a12">VARCHAR</a>;
00099             type[5] = <a class="code" href="group__datatypes.html#gga0a13">INTEGER</a>;
00100             
00101             <span class="keywordflow">if</span> (columnNumber&lt;0 || columnNumber&gt;5){
00102                 <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(<a class="code" href="_dbj_error_codes_8hpp.html#a70a28">DBJ_CAT_OUT_OF_RANGE</a>);
00103                 <span class="keywordflow">goto</span> cleanup;
00104             }
00105             <span class="keywordflow">else</span>{
00106                 dataType = type[columnNumber];
00107                 <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00108                             };
00109 
00110             cleanup:
00111             <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00112 
00113     };
00114                 
00115             
00116 
<a name="l00117"></a><a class="code" href="class_dbj_sys_tables.html#a8">00117</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a8">DbjSysTables::setColumName</a>(<a class="code" href="group__int__datatypes.html#ga3">Uint16</a> columnNumber,
00118             <span class="keywordtype">char</span> <span class="keyword">const</span> * <span class="keyword">const</span> columnName){
00119             
00120             <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a30">DBJ_CAT_NOT_ALLOWED</a>;
00121             };
00122             
00123 
<a name="l00124"></a><a class="code" href="class_dbj_sys_tables.html#a9">00124</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a9">DbjSysTables::getPrimaryKeyColumn</a>(<a class="code" href="group__int__datatypes.html#ga3">Uint16</a> &amp;columnNumber)<span class="keyword"> const</span>{
00125         columnNumber = 1;
00126         <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00127     };
00128 
00129 
<a name="l00130"></a><a class="code" href="class_dbj_sys_tables.html#a10">00130</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a10">DbjSysTables::getNumIndexes</a>(<a class="code" href="group__int__datatypes.html#ga5">Uint32</a> &amp;indexCount)<span class="keyword"> const</span>{
00131     
00132         indexCount = 1;
00133         <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a1">DBJ_SUCCESS</a>;
00134     };
00135 
00136 
00137 
<a name="l00138"></a><a class="code" href="class_dbj_sys_tables.html#a11">00138</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a11">DbjSysTables::getIndex</a>(<a class="code" href="group__int__datatypes.html#ga5">Uint32</a> <span class="keyword">const</span> indexPosition, <a class="code" href="class_dbj_index.html">DbjIndex</a> *&amp;index)<span class="keyword"> const</span>{
00139 
00140         <span class="keywordflow">if</span> (indexPosition == 1){
00141             
00142             <a class="code" href="class_dbj_index.html">DbjIndex</a> SysIndex* = <span class="keyword">new</span> <a class="code" href="class_dbj_sys_index.html">DbjSysIndex</a>;
00143             index = SysIndex;
00144             <span class="keywordflow">return</span> DBJSUCCESS;
00145         };
00146 
00147         <span class="keywordflow">else</span>{
00148             <a class="code" href="_dbj_error_8hpp.html#a1">DBJ_SET_ERROR</a>(<a class="code" href="_dbj_error_codes_8hpp.html#a70a31">DBJ_CAT_NO_INDEX_ON_POS</a>);
00149             <span class="keywordflow">goto</span> cleanup;
00150         };
00151 
00152     cleanup:
00153         <span class="keywordflow">return</span> <a class="code" href="_dbj_error_8hpp.html#a11">DbjGetErrorCode</a>();
00154 
00155     };
00156 
00157 
<a name="l00158"></a><a class="code" href="class_dbj_sys_tables.html#a12">00158</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a12">DbjSysTables::hasIndex</a>(<a class="code" href="group__int__datatypes.html#ga3">Uint16</a> <span class="keyword">const</span> columnNumber,
00159             DbjIndexType <span class="keyword">const</span> &amp;indexType, <a class="code" href="group__id__datatypes.html#ga5">IndexId</a> &amp;indexId)<span class="keyword"> const</span>{
00160                   <span class="keywordflow">if</span> (columnNumber = 1){
00161                      DbjIndexTxpe = <a class="code" href="group__datatypes.html#gga1a15">Hash</a>;
00162                      <a class="code" href="group__id__datatypes.html#ga5">IndexId</a> = 0;
00163                      }
00164                   <span class="keywordflow">else</span> <span class="keywordflow">return</span> DBJ_CAT_NO_INDEX_ON_COL;
00165 
00166             };
00167             
00168  
<a name="l00169"></a><a class="code" href="class_dbj_sys_tables.html#a13">00169</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a13">DbjSysTables::getTuple</a>(<a class="code" href="class_dbj_record.html">DbjRecord</a> <span class="keyword">const</span> &amp;record, <a class="code" href="class_dbj_tuple.html">DbjTuple</a> *&amp;tuple){
00170     
00171                  <span class="keywordflow">if</span> (record.GetLength() =
00172     <span class="keywordflow">return</span> 0;
00173     };
00174 
00175     
<a name="l00176"></a><a class="code" href="class_dbj_sys_tables.html#a14">00176</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a14">DbjSysTables::setTableName</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> * <span class="keyword">const</span> tableName){
00177     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a30">DBJ_CAT_NOT_ALLOWED</a>;
00178     };
00179         
00180     
<a name="l00181"></a><a class="code" href="class_dbj_sys_tables.html#a15">00181</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a15">DbjSysTables::createColumns</a>(<a class="code" href="group__int__datatypes.html#ga3">Uint16</a> <span class="keyword">const</span> num){
00182     <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a30">DBJ_CAT_NOT_ALLOWED</a>;
00183     };
00184 
00185 
<a name="l00186"></a><a class="code" href="class_dbj_sys_tables.html#a16">00186</a>     <a class="code" href="_dbj_error_codes_8hpp.html#a70">DbjErrorCode</a> <a class="code" href="class_dbj_sys_tables.html#a16">DbjSysTables::setColumnDefinition</a>(<a class="code" href="group__int__datatypes.html#ga3">Uint16</a> <span class="keyword">const</span> columnNumber,
00187             <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> &amp;columnName, <span class="keyword">const</span> DbjDataType dataType,
00188             <span class="keywordtype">bool</span> <span class="keyword">const</span> isNullable){
00189         
00190             <span class="keywordflow">return</span> <a class="code" href="_dbj_error_codes_8hpp.html#a70a30">DBJ_CAT_NOT_ALLOWED</a>;
00191             };
00192 
00193 
00194 
00195 
00196 
00197 
00198 
00199 
00200 
00201 
00202 
00203 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Thu Nov 18 16:28:22 2004 for Jenas Datenbanksystem 'System J' by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
