<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Jenas Datenbanksystem &apos;System J&apos;: DbjLatch Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>DbjLatch Class Reference</h1>Kurzzeitsperre.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_dbj_latch_8hpp-source.html">DbjLatch.hpp</a>&gt;</code>
<p>
<a href="class_dbj_latch-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#w2">LatchMode</a> { <a class="el" href="class_dbj_latch.html#w2w0">Exclusive</a>, 
<a class="el" href="class_dbj_latch.html#w2w1">Shared</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Latch Modi.  <a href="#w2">More...</a><br></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#a0">initialize</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialisiere Latch.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#a1">destroy</a> (bool const force=false)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Beseitige Latch.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#a2">get</a> (<a class="el" href="class_dbj_latch.html#w2">LatchMode</a> const mode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hole Latch.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#a3">release</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gib Latch frei.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#a4">getSharedCount</a> (<a class="el" href="group__int__datatypes.html#ga15">Uint32</a> &amp;sharedCount) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Teste auf Shared Latch.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#a5">isHeldExclusive</a> (bool &amp;isHeld) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Teste auf Exclusive Latch.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#a6">isLocked</a> (bool &amp;isLatched) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Teste auf Shared oder Exclusive Latch.  <a href="#a6"></a><br></td></tr>
<tr><td colspan=2><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#b0">DbjLatch</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Versteckter Konstruktor.  <a href="#b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#b1">~DbjLatch</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Versteckter Destruktor.  <a href="#b1"></a><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_dbj_latch.html#r0">semaphoreId</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ID der Semaphore fuer das Latch.  <a href="#r0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Kurzzeitsperre. 
<p>
Eine Kurzzeitsperre ist - anders als ein "Lock" - dazu gedacht, Datenstrukturen innerhalb des Datenbanksystems kurzzeitig zu sperren, um konkurrierende Aenderungsoperationen zu serialisieren. Beispielsweise muss sichergestellt werden, dass Aenderungen in der LRU-Liste des Bufferpools zu einem Zeitpunkt nur von einem Prozess vorgenommen werden, oder dass Aenderungen in der Lockliste serialisiert werden, um Kollisionen zu vermeiden.<p>
Wenn ein Latch mit <a class="el" href="class_dbj_latch.html#a2">DbjLatch::get</a> angefordert wird, so wartet (schlaeft) der aktuelle Prozess so lange, bis er das Latch erhaelt, d.h. er wartet bis der andere Prozess, der das Latch haelt, es wieder freigibt. Ist das Latch im Moment von keinem anderen Prozess genutzt, so wird es natuerlich gleich an den aktuellen Prozess vergeben. Es ist zu beachten, dass der hier beschriebene Vorgang nur fuer "Exclusive" Latches gilt. Ein "Shared" Latch kann von beliebig vielen Prozessen gleichzeitig genutzt werden; dieses Latch kann dann aber nicht im "Exclusive" Modus angefordert werden. Somit ist "Shared" vergleichbar zu einer Lesesperre, und "Exclusive" entspricht einer Schreibsperre.<p>
Das C++-Objekt des Latches muss in einem Speicherbereich angelegt werden, auf den alle zu serialisierenden Prozesse zugreifen koennen. Die Latch-Struktur selbst muss also ge"share"t werden. Um dies zu bewerkstelligen, wird das Objekt auf ein vorhandenes Stueck Speicher abgebildet, und anschliessend <a class="el" href="class_dbj_latch.html#a0">DbjLatch::initialize</a> aufgerufen. (Es sind keine Konstruktoren oder Destruktoren implementiert.) Danach kann das Latch genutzt werden, beispielsweise so: <pre>
 void *sharedMem = NULL;
 rc = memMgr-&gt;connectToMemorySet(DbjMemoryManager::BufferPool, sharedMem);
 if (rc != DBJ_SUCCESS) {
     <a class="el" href="_dbj_error_8hpp.html#a8">DBJ_TRACE_ERROR()</a>;
     goto cleanup;
 }
 // Bilde Latch auf Beginn des Speicherbereichs von "sharedMem" ab
 DbjLatch *latch = static_cast&lt;DbjLatch *&gt;(sharedMem);
 // Initialisiere Latch
 rc = latch-&gt;<a class="el" href="class_dbj_latch.html#a0">initialize()</a>;
 if (rc != DBJ_SUCCESS) {
     <a class="el" href="_dbj_error_8hpp.html#a8">DBJ_TRACE_ERROR()</a>;
     goto cleanup;
 }
 // nun koennen "latch-&gt;get()" und "latch-&gt;release()" genutzt werden.
 </pre><p>
Die Kurzzeitsperren (Latches) verwenden intern die vom Betriebssystem zur Verfuegung gestellten Semaphoren. 
<p>
Definition at line <a class="el" href="_dbj_latch_8hpp-source.html#l00066">66</a> of file <a class="el" href="_dbj_latch_8hpp-source.html">DbjLatch.hpp</a>.<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="w2" doxytag="DbjLatch::LatchMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="class_dbj_latch.html#w2">DbjLatch::LatchMode</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Latch Modi. 
<p>
Das Latch kann folgende Zustaende annehmen:<ul>
<li>Exclusive : Latch im exklusiven Zugriff angefordert</li><li>Shared : Latch im parallelen, lesenden Zugriff angefordert </li></ul>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="w2w0" doxytag="Exclusive" ></a>Exclusive</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="w2w1" doxytag="Shared" ></a>Shared</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
Definition at line <a class="el" href="_dbj_latch_8hpp-source.html#l00075">75</a> of file <a class="el" href="_dbj_latch_8hpp-source.html">DbjLatch.hpp</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="b0" doxytag="DbjLatch::DbjLatch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DbjLatch::DbjLatch           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Versteckter Konstruktor. 
<p>
Definition at line <a class="el" href="_dbj_latch_8hpp-source.html#l00186">186</a> of file <a class="el" href="_dbj_latch_8hpp-source.html">DbjLatch.hpp</a>.
<p>
References <a class="el" href="_dbj_latch_8hpp-source.html#l00192">semaphoreId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="DbjLatch::~DbjLatch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DbjLatch::~<a class="el" href="class_dbj_latch.html">DbjLatch</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Versteckter Destruktor. 
<p>
Definition at line <a class="el" href="_dbj_latch_8hpp-source.html#l00188">188</a> of file <a class="el" href="_dbj_latch_8hpp-source.html">DbjLatch.hpp</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a1" doxytag="DbjLatch::destroy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjLatch::destroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool const&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>force</em> = <code>false</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Beseitige Latch. 
<p>
Ein zuvor initialisiertes Latch wird wieder beseitigt. Nach diesem Aufruf kann das Latch nicht mehr benutzt werden.<p>
Ist "force" auf "true" gesetzt, so wird intern zuerst das Latch angefordert, um zu verhindern, dass das Zerstoeren mit anderen Operationen kollidiert. Anschliessend (oder wenn "force" auf "false" gesetzt war), wird der zu Grunde liegende Semaphoren-Set entfernt. Definition at line <a class="el" href="_dbj_latch_8cpp-source.html#l00094">94</a> of file <a class="el" href="_dbj_latch_8cpp-source.html">DbjLatch.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a105">DBJ_LATCH_SEM_DESTROY_WARN</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="class_dbj_latch.html#w2w0">Exclusive</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00131">get()</a>, and <a class="el" href="_dbj_latch_8hpp-source.html#l00192">semaphoreId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="DbjLatch::get" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjLatch::get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_dbj_latch.html#w2">LatchMode</a> const&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>mode</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hole Latch. 
<p>
Das Latch wird geholt und der Status/Modus wird in den internen Semaphoren-Set hinterlegt. Auf den durch das Latch geschuetzten Speicherbereich kann nun sicher zugegriffen werden. Es ist die Aufgabe des Aufrufers, sicherzustellen, dass schreibende und lesende Zugriffe auf den geschuetzten Speicher mit dem Latch-Modus uebereinstimmen.<p>
Der Aurufer muss angeben, ob ein exklusives oder geshartes Latch gewuenscht wird. Bei einem Lese-Latch wird ein Zaehler mitgefuehrt. Weiterhin erfordert jeder Aufruf von <a class="el" href="class_dbj_latch.html#a2">DbjLatch::get</a>, dass er mit einem korrespondierenden <a class="el" href="class_dbj_latch.html#a3">DbjLatch::release</a> Aufruf komplementiert wird.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>mode</em>&nbsp;</td><td>Modus fuer das Latch </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_latch_8cpp-source.html#l00131">131</a> of file <a class="el" href="_dbj_latch_8cpp-source.html">DbjLatch.cpp</a>.
<p>
References <a class="el" href="_dbj_latch_8cpp-source.html#l00042">DBJ_LATCH_BLOCK_NEW_SHARED</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00046">DBJ_LATCH_EXCLUSIVE</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a106">DBJ_LATCH_SEM_OPERATION_FAIL</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00044">DBJ_LATCH_SHARED_COUNTER</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="class_dbj_latch.html#w2w0">Exclusive</a>, <a class="el" href="_dbj_latch_8hpp-source.html#l00192">semaphoreId</a>, and <a class="el" href="class_dbj_latch.html#w2w1">Shared</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="DbjLatch::getSharedCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjLatch::getSharedCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group__int__datatypes.html#ga15">Uint32</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>sharedCount</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Teste auf Shared Latch. 
<p>
Gib die Anzahl der Prozesse (einschliesslich dem eigenen) zurueck, die dieses Latch derzeit im "Shared" Modus halten. Ist das Latch derzeit nicht im "Shared" Modus gesetzt, so gibt diese Methode 0 zurueck.<p>
Es ist zu beachten, dass das Ergebnis dieser Operation kaum verwertbar ist, da direkt nach dem Aufrufen der Methode ein anderer Prozess das Latch erhalten haben koennte.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>sharedCount</em>&nbsp;</td><td>Anzahl der "Shared" Nutzer des Latches </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_latch_8cpp-source.html#l00266">266</a> of file <a class="el" href="_dbj_latch_8cpp-source.html">DbjLatch.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a106">DBJ_LATCH_SEM_OPERATION_FAIL</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00044">DBJ_LATCH_SHARED_COUNTER</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_latch_8hpp-source.html#l00192">semaphoreId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="DbjLatch::initialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjLatch::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialisiere Latch. 
<p>
Initialisiere die Kurzzeitsperre. Hierbei werden alle Latch-internen Datenstrukturen auf ihre Anfangswerte gesetzt, d.h. das Latch gilt als "Unlatched" und der Zaehler fuer die "Shared"-Anforderungen wird auf 0 gesetzt. Dieser Aufruf darf <em>nur</em> einmal beim Starten des Systems und initialisieren der Shared Memory Bereiche aufgerufen werden und <em>nicht</em> im laufenden Betrieb.<p>
Da ein Latch im Shared Memory nicht ohne weiteres direkt mit dem "new" Operator erzeugt werden kann, existieren keine Konstruktoren. Statt dessen muss das Latch in den Shared Memory Bereich ge"map"t und anschliessend initialisiert werden.<p>
Intern wird ein neuer Semaphoren-Set kreiert, und dieser Semaphoren-Set ist die eigentlichen Implementierung des Latches mit Hilfe des zu Grunde liegenden Betriebssystems. Definition at line <a class="el" href="_dbj_latch_8cpp-source.html#l00050">50</a> of file <a class="el" href="_dbj_latch_8cpp-source.html">DbjLatch.cpp</a>.
<p>
References <a class="el" href="_dbj_latch_8cpp-source.html#l00042">DBJ_LATCH_BLOCK_NEW_SHARED</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00046">DBJ_LATCH_EXCLUSIVE</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a104">DBJ_LATCH_SEM_CREATE_FAIL</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a106">DBJ_LATCH_SEM_OPERATION_FAIL</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00044">DBJ_LATCH_SHARED_COUNTER</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00235">DBJ_TRACE_NUMBER</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00094">destroy()</a>, <a class="el" href="_dbj_latch_8hpp-source.html#l00192">semaphoreId</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00056">Uint16</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="DbjLatch::isHeldExclusive" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjLatch::isHeldExclusive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>isHeld</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Teste auf Exclusive Latch. 
<p>
Teste ob das Latch derzeit von irgendeinem Prozess (auch den eigenen) vom "Exclusive" Modus angefordert wurde.<p>
Es ist zu beachten, dass das Ergebnis dieser Operation kaum verwertbar ist, da direkt nach dem Aufrufen der Methode ein anderer Prozess das Latch erhalten haben koennte.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>isHeld</em>&nbsp;</td><td>Referenz auf den Indikator ob "Exclusive" Nutzer existiert </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_latch_8cpp-source.html#l00286">286</a> of file <a class="el" href="_dbj_latch_8cpp-source.html">DbjLatch.cpp</a>.
<p>
References <a class="el" href="_dbj_latch_8cpp-source.html#l00046">DBJ_LATCH_EXCLUSIVE</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a106">DBJ_LATCH_SEM_OPERATION_FAIL</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, and <a class="el" href="_dbj_latch_8hpp-source.html#l00192">semaphoreId</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="DbjLatch::isLocked" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjLatch::isLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>isLatched</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Teste auf Shared oder Exclusive Latch. 
<p>
Teste ob das Latch derzeit von irgendeinem Prozess (auch den eigenen) in einem beliebigen Modus angefordert ist.<p>
Es ist zu beachten, dass das Ergebnis dieser Operation kaum verwertbar ist, da direkt nach dem Aufrufen der Methode ein anderer Prozess das Latch erhalten haben koennte.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>isLatched</em>&nbsp;</td><td>Referenz auf den Indikator ob Latch gerade genutzt wird </td></tr>
  </table>
</dl>
Definition at line <a class="el" href="_dbj_latch_8cpp-source.html#l00306">306</a> of file <a class="el" href="_dbj_latch_8cpp-source.html">DbjLatch.cpp</a>.
<p>
References <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00347">DBJ_TRACE_ERROR</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00266">getSharedCount()</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00286">isHeldExclusive()</a>, and <a class="el" href="_dbj_types_8hpp-source.html#l00070">Uint32</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="DbjLatch::release" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="_dbj_error_codes_8hpp.html#a107">DbjErrorCode</a> DbjLatch::release           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gib Latch frei. 
<p>
Das Latch wird vom aktuellen Prozess freigegeben und der Zugriff auf die durch das Latch geschuetzte Datenstruktur ist fuer andere Prozesse wieder moeglich. Das bedeutet ein weiterer Prozess kann erneut das Latch anfordern und die geschuetzten Informationen verwenden.<p>
Bevor diese Methode aufgerufen wird, <em>muss</em> ein Aufruf zu <a class="el" href="class_dbj_latch.html#a2">DbjLatch::get</a> erfolgt sein. Sonst wuerde beispielsweise das Lese-Latch eines anderen Prozesses entfernt. Definition at line <a class="el" href="_dbj_latch_8cpp-source.html#l00223">223</a> of file <a class="el" href="_dbj_latch_8cpp-source.html">DbjLatch.cpp</a>.
<p>
References <a class="el" href="_dbj_latch_8cpp-source.html#l00042">DBJ_LATCH_BLOCK_NEW_SHARED</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00046">DBJ_LATCH_EXCLUSIVE</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a106">DBJ_LATCH_SEM_OPERATION_FAIL</a>, <a class="el" href="_dbj_latch_8cpp-source.html#l00044">DBJ_LATCH_SHARED_COUNTER</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00268">DBJ_SET_ERROR_TOKEN2</a>, <a class="el" href="_dbj_error_codes_8hpp.html#a107a1">DBJ_SUCCESS</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00212">DBJ_TRACE_ENTRY</a>, <a class="el" href="_dbj_trace_8hpp-source.html#l00238">DBJ_TRACE_STRING</a>, <a class="el" href="_dbj_error_codes_8hpp-source.html#l00037">DbjErrorCode</a>, <a class="el" href="_dbj_error_8hpp-source.html#l00235">DbjGetErrorCode()</a>, and <a class="el" href="_dbj_latch_8hpp-source.html#l00192">semaphoreId</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="DbjLatch::semaphoreId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int <a class="el" href="class_dbj_latch.html#r0">DbjLatch::semaphoreId</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
ID der Semaphore fuer das Latch. 
<p>
Definition at line <a class="el" href="_dbj_latch_8hpp-source.html#l00192">192</a> of file <a class="el" href="_dbj_latch_8hpp-source.html">DbjLatch.hpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_dbj_latch_8hpp-source.html">DbjLatch.hpp</a><li><a class="el" href="_dbj_latch_8cpp-source.html">DbjLatch.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jul 4 15:40:33 2005 for Jenas Datenbanksystem 'System J' by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
